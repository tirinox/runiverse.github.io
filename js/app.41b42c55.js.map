{"version":3,"file":"js/app.41b42c55.js","mappings":"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","sources":["webpack://thorviz/./src/App.vue","webpack://thorviz/./src/components/MainScreen.vue","webpack://thorviz/./src/config.js","webpack://thorviz/./src/components/parts/FPSCounter.vue","webpack://thorviz/./src/helpers/3D.js","webpack://thorviz/./src/components/parts/FPSCounter.vue?9287","webpack://thorviz/./src/helpers/MathUtil.js","webpack://thorviz/./src/helpers/NodeEvent.js","webpack://thorviz/./src/helpers/NodeTracker.js","webpack://thorviz/./src/helpers/physics/PhysicalObject.js","webpack://thorviz/./src/visual/NodeObject.js","webpack://thorviz/./src/helpers/physics/Simulation.js","webpack://thorviz/./src/visual/TitleLabel3D.js","webpack://thorviz/./src/visual/modes/ModeBase.js","webpack://thorviz/./src/helpers/physics/Attractor.js","webpack://thorviz/./src/helpers/physics/AttractorShape.js","webpack://thorviz/./src/helpers/physics/TCLogoShape.js","webpack://thorviz/./src/visual/modes/ModeNormal.js","webpack://thorviz/./src/visual/modes/ModeStatus.js","webpack://thorviz/./src/helpers/physics/CirclePack.js","webpack://thorviz/./src/helpers/data/IPAddressInfo.js","webpack://thorviz/./src/visual/modes/ModeProvider.js","webpack://thorviz/./src/visual/NodeGroup.js","webpack://thorviz/./src/helpers/data/URLDataSource.js","webpack://thorviz/./src/visual/MainScene.js","webpack://thorviz/./src/components/MainScreen.vue?8f35","webpack://thorviz/./src/App.vue?7ccd","webpack://thorviz/./src/main.js","webpack://thorviz/webpack/bootstrap","webpack://thorviz/webpack/runtime/chunk loaded","webpack://thorviz/webpack/runtime/compat get default export","webpack://thorviz/webpack/runtime/define property getters","webpack://thorviz/webpack/runtime/global","webpack://thorviz/webpack/runtime/hasOwnProperty shorthand","webpack://thorviz/webpack/runtime/make namespace object","webpack://thorviz/webpack/runtime/node module decorator","webpack://thorviz/webpack/runtime/jsonp chunk loading","webpack://thorviz/webpack/startup"],"sourcesContent":["<template>\n    <!--    <THORWorld msg=\"Hello\"/>-->\n    <MainScreen></MainScreen>\n</template>\n\n<script>\n// import THORWorld from \"@/components/THORWorld\";\nimport MainScreen from \"@/components/MainScreen\";\nimport {preloadFont} from \"troika-three-text\";\nimport {Config} from \"@/config\";\n\nexport default {\n    name: 'App',\n    components: {\n        MainScreen,\n        // THORWorld\n    },\n    data() {\n        return {}\n    },\n    computed: {},\n    created() {\n        document.title = 'THORViz'\n        this.preloading()\n    },\n    methods: {\n        preloading() {\n            preloadFont(\n                {\n                    font: Config.Font.Main,\n                    characters: 'abcdefghijklmnopqrstuvwxyz1234567890'\n                },\n                () => {\n                    console.log('font loading done')\n                }\n            )\n        }\n    }\n}\n</script>\n\n<style>\n\n@font-face {\n    font-family: 'Norse';\n    font-style: normal;\n    font-weight: normal;\n    src: local('Norse'), url('../public/fonts/Norse-KaWl.otf') format('opentype');\n}\n\n@font-face {\n    font-family: 'Norse';\n    font-style: normal;\n    font-weight: bold;\n    src: local('Norse-Bold'), url('../public/fonts/NorseBold-2Kge.otf') format('opentype');\n}\n\n@font-face {\n    font-family: 'EXO2';\n    src: url('../public/fonts/Exo2-VariableFont_wght.ttf') format('truetype');\n}\n\nhtml, body {\n    margin: 0;\n    height: 100%;\n    font-family: 'EXO2', monospace;\n}\n\ncanvas {\n    display: block;\n}\n\n</style>\n","<template>\n    <div class=\"canvas-holder\">\n        <canvas\n            class=\"canvas-full\"\n            ref=\"canvas\"\n            tabindex=\"1\"\n            @keydown=\"onKeyDown\"\n            @mousemove=\"onMouseMove\"\n            @mouseenter=\"onMouseEnter\"\n            @mouseleave=\"onMouseLeave\">\n        </canvas>\n        <FPSCounter\n            v-show=\"showFps\"\n            ref=\"fps\"\n        >\n        </FPSCounter>\n        <div class=\"control-panel\">\n            <button @click=\"setSceneMode('normal')\" :class=\"isButtonSelectedClass('normal')\">NORMAL</button>\n            <button @click=\"setSceneMode('status')\" :class=\"isButtonSelectedClass('status')\">STATUS</button>\n            <button @click=\"setSceneMode('provider')\"  :class=\"isButtonSelectedClass('provider')\">PROVIDER</button>\n<!--            <button @click=\"setSceneMode('bond')\">BOND</button>-->\n        </div>\n    </div>\n</template>\n\n<script>\n\nimport \"@/css/common.css\"\nimport * as THREE from \"three\"\nimport {Config} from \"@/config\";\nimport CameraControls from \"camera-controls\";\nimport {EffectComposer} from 'three/examples/jsm/postprocessing/EffectComposer.js';\nimport {RenderPass} from 'three/examples/jsm/postprocessing/RenderPass.js';\nimport {UnrealBloomPass} from \"three/examples/jsm/postprocessing/UnrealBloomPass\";\nimport FPSCounter from \"@/components/parts/FPSCounter\";\nimport {MainScene} from \"@/visual/MainScene\";\nimport _ from \"lodash\";\nimport TWEEN from \"tween\";\n// import {TrailTestScene} from \"@/visual/TrailTestScene\";\n\nexport default {\n    name: 'MainScreen',\n    components: {FPSCounter},\n    props: {},\n\n    data() {\n        return {\n            showFps: true,\n\n            nodes: [],\n            prevNodes: [],\n\n            mouseEnterX: 0,\n            mouseEnterY: 0,\n\n            sceneMode: 'normal',\n        }\n    },\n\n    methods: {\n        onKeyDown(event) {\n            if (event.code === 'KeyR') {\n                this.resetCamera()\n            } else if (event.code === 'KeyD') {\n                this.showFps = !this.showFps\n            } else if (event.code === 'KeyH') {\n                console.log('help?')\n            }\n        },\n\n        onMouseMove(event) {\n            const x = event.clientX\n            const y = event.clientY\n            if (!this.mouseEnterX) {\n                this.mouseEnterX = x\n                this.mouseEnterY = y\n                return\n            }\n            const scale = 0.0005\n            const dx = this.mouseEnterX - x\n            const dy = this.mouseEnterY - y\n            this.mouseEnterX = x\n            this.mouseEnterY = y\n            this.controls.rotate(dx * scale, dy * scale)\n        },\n\n        onMouseEnter(event) {\n            this.mouseEnterX = event.clientX\n            this.mouseEnterY = event.clientY\n        },\n\n        onMouseLeave() {\n        },\n\n        resetCamera() {\n            this.controls.reset()\n        },\n\n        resizeRendererToDisplaySize() {\n            const renderer = this.renderer\n            const canvas = renderer.domElement;\n            const width = canvas.clientWidth;\n            const height = canvas.clientHeight;\n\n            this.camera.aspect = width / height;\n            this.camera.updateProjectionMatrix();\n\n            const needResize = canvas.width !== width || canvas.height !== height;\n            if (needResize) {\n                renderer.setSize(width, height, false);\n                if (this.bloomPass) {\n                    this.bloomPass.setSize(width, height);\n                }\n                this.composer.setSize(width, height);\n            }\n\n            return needResize;\n        },\n\n        render() {\n            this.resizeRendererToDisplaySize(this.renderer)\n\n            const delta = this.clock.getDelta();\n            this.$refs.fps.update(delta, this.scene)\n            this.controls.update(delta);\n            this.content.update(delta)\n\n            TWEEN.update()\n\n            this.composer.render(delta)\n\n            requestAnimationFrame(this.render);\n        },\n\n        createCamera() {\n            this.camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight,\n                0.001, Config.Controls.Camera.Distance.Max * 2);\n            // this.camera = new THREE.OrthographicCamera()\n            this.camera.position.z = Config.Controls.Camera.Distance.Start\n        },\n\n        createCameraControl() {\n            const controls = this.controls = new CameraControls(this.camera, this.renderer.domElement);\n            const cfg = Config.Controls.Camera\n\n            controls.dragToOffset = true\n            controls.minDistance = cfg.Distance.Min\n            controls.maxDistance = cfg.Distance.Max\n            this.camera.position.z = cfg.Distance.Start\n\n            controls.minAzimuthAngle = THREE.MathUtils.degToRad(-cfg.AzimuthAngleLimit)\n            controls.maxAzimuthAngle = THREE.MathUtils.degToRad(cfg.AzimuthAngleLimit)\n\n            controls.minPolarAngle = THREE.MathUtils.degToRad(-cfg.PolarAngleLimit + 90)\n            controls.maxPolarAngle = THREE.MathUtils.degToRad(cfg.PolarAngleLimit + 90)\n\n            controls.update(0)\n        },\n\n        makeSkybox() {\n            const baseURL = Config.Scene.Sky.SkyBox\n            const ext = Config.Scene.Sky.SkyBoxExt\n\n            const urls = _.map([\n                `right.${ext}`, `left.${ext}`,\n                `top.${ext}`, `bottom.${ext}`,\n                `front.${ext}`, `back.${ext}`\n            ], (name) => `${baseURL}/${name}`);\n\n            this.scene.background = new THREE.CubeTextureLoader().load(urls)\n        },\n\n        makeRenderer(canvas) {\n            let renderer = this.renderer = new THREE.WebGLRenderer({\n                canvas,\n                antialias: false,\n                logarithmicDepthBuffer: true,\n            });\n\n            if (devicePixelRatio) {\n                console.log(`Renderer: Setting devicePixelRatio = ${devicePixelRatio}.`)\n                renderer.setPixelRatio(devicePixelRatio)\n            }\n\n            const renderScene = new RenderPass(this.scene, this.camera);\n\n            this.composer = new EffectComposer(renderer);\n            this.composer.addPass(renderScene);\n\n            const bloomCfg = Config.Effects.Bloom\n            if (bloomCfg.Enabled) {\n                this.bloomPass = new UnrealBloomPass(\n                    new THREE.Vector2(window.innerWidth, window.innerHeight),\n                    bloomCfg.Strength,\n                    bloomCfg.Radius,\n                    bloomCfg.Threshold)\n                this.composer.addPass(this.bloomPass);\n            }\n        },\n\n        buildScene() {\n            this.scene.add(this.camera)\n            this.makeSkybox()\n\n            this.content = new MainScene(this.scene, this)\n            // this.content = new TrailTestScene(this.scene, this)\n        },\n\n        setSceneMode(mode) {\n            this.sceneMode = mode\n            if(this.content.nodeGroup) {\n                this.content.nodeGroup.mode = mode\n            }\n        },\n\n        isButtonSelectedClass(modeName) {\n            return {\n                'button-selected': this.sceneMode === modeName\n            }\n        },\n\n        pokeActivity() {\n            this.$refs.fps.pokeActivity()\n        }\n    },\n\n    mounted() {\n        this.canvas = this.$refs.canvas\n\n        this.clock = new THREE.Clock()\n        this.scene = new THREE.Scene()\n\n        this.createCamera(this.canvas)\n        this.makeRenderer(this.canvas)\n        this.createCameraControl()\n        this.resizeRendererToDisplaySize()\n        this.buildScene()\n\n        requestAnimationFrame(this.render);\n    },\n\n    unmounted() {\n        this.content.dispose()\n        this.controls.dispose()\n    }\n}\n\n</script>\n\n<style>\n\n.canvas-full {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    left: 0;\n    top: 0;\n    outline: none;\n}\n\n.canvas-holder {\n    width: 100%;\n    height: 100%;\n}\n\n.control-panel {\n    position: absolute;\n    bottom: 4px;\n    right: 4px;\n}\n\n.button-selected {\n    border-width: 2px;\n    opacity: 1.0;\n}\n\n</style>\n","export const Config = {\n    DataSource: {\n        NodesURL: 'https://thornode.ninerealms.com/thorchain/nodes',\n        PollPeriod: 3, // sec\n        ReactRandomDelay: 2.5, // sec\n    },\n    Font: {\n        // Main: 'fonts/NorseBold-2Kge.otf'\n        Main: 'fonts/Exo2-VariableFont_wght.ttf'\n    },\n    Effects: {\n        Bloom: {\n            Enabled: true,\n            Strength: 0.5,\n            Threshold: 0.5,\n            Radius: 0.5,\n        }\n    },\n    Controls: {\n        Camera: {\n            Distance: {\n                Min: 800,\n                Max: 2500,\n                Start: 1800,\n            },\n            AzimuthAngleLimit: 30,\n            PolarAngleLimit: 35,\n        },\n    },\n    Scene: {\n        Sky: {\n            SkyBox: '/texture/skybox/nebula1',\n            SkyBoxExt: 'jpg',\n        }\n    },\n    Physics: {\n        BaseForce: 1500.0,\n    }\n}\n\nexport const Colors = {\n    LightningBlue: 0x00CCFF,\n    YggdrasilGreen: 0x33FF99,\n    MidgardTurqoise: 0x23DCC8,\n    NightBlack: 0x101921\n}\n","<template>\n    <div class=\"fps-counter\">\n        <span><strong>{{ Number(fps).toFixed(2) }}</strong> FPS, {{ objCount }} objects</span>\n        <span class=\"activity\" v-show=\"activityIndicator\">•</span>\n    </div>\n</template>\n\n<script>\n\nimport {countObjects} from \"@/helpers/3D\";\n\nexport default {\n    name: 'FPSCounter',\n    props: {\n        updatePeriod: {\n            type: Number,\n            default: 1.0\n        }\n    },\n    data() {\n        return {\n            fps: 0.0,\n            objCount: 0,\n            activityIndicator: false,\n            lastUpdateTime: 0.0\n        }\n    },\n    methods: {\n        pokeActivity() {\n            this.activityIndicator = true\n            setTimeout(() => {\n                this.activityIndicator = false\n            }, 100)\n        },\n\n        update(delta, scene) {\n            if (delta > 0 && +Date.now() - this.updatePeriod * 1000 > this.lastUpdateTime) {\n                this.fps = 1.0 / delta\n                this.objCount = countObjects(scene)\n                this.lastUpdateTime = +Date.now()\n            }\n        },\n    }\n}\n\n</script>\n\n<style scoped>\n\n.fps-counter {\n    text-align: left;\n    font-size: 14pt;\n    color: whitesmoke;\n    position: absolute;\n    margin: 10px;\n    left: 0;\n    top: 0;\n}\n</style>","export function countObjects(parent) {\n    let numOfMeshes = 0;\n    parent.traverse(function () {\n        numOfMeshes++;\n    });\n    return numOfMeshes\n}\n\nexport function clearObject(obj) {\n    if(obj) {\n        obj.remove.apply(obj, obj.children);\n    }\n}\n","import { render } from \"./FPSCounter.vue?vue&type=template&id=590dbc21&scoped=true\"\nimport script from \"./FPSCounter.vue?vue&type=script&lang=js\"\nexport * from \"./FPSCounter.vue?vue&type=script&lang=js\"\n\nimport \"./FPSCounter.vue?vue&type=style&index=0&id=590dbc21&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/tirinox/Projects/thorviz/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-590dbc21\"]])\n\nexport default __exports__","import {Vector3} from \"three\";\nimport _ from \"lodash\";\n\nexport function defaultValue(x, defaultValue) {\n    return x === undefined ? defaultValue : x\n}\n\n\nexport class Random {\n    static getRandomInt(max) {\n        return Math.floor(Math.random() * max);\n    }\n\n    static getRandomFloat(min, max) {\n        return Math.random() * (max - min) + min\n    }\n\n    static getRandomSample(array) {\n        if (!array) {\n            return null\n        }\n        const index = Random.getRandomInt(array.length)\n        return array[index]\n    }\n\n    static removeRandomItem(array) {\n        if (Math.random() > 0.5) {\n            const index = Random.getRandomInt(array.length)\n            array.splice(index, 1)\n        }\n        return array\n    }\n\n    static randomVector({xMin, xMax, yMin, yMax, zMin, zMax}) {\n        xMin = defaultValue(xMin, -10)\n        xMax = defaultValue(xMax, 10)\n        yMin = defaultValue(yMin, -10)\n        yMax = defaultValue(yMax, 10)\n        zMin = defaultValue(zMin, -10)\n        zMax = defaultValue(zMax, 10)\n\n        return new Vector3(\n            Random.getRandomFloat(xMin, xMax),\n            Random.getRandomFloat(yMin, yMax),\n            Random.getRandomFloat(zMin, zMax),\n        )\n    }\n\n    static randomOnCircle(r = 100, cx = 0, cy = 0) {\n        const phase = Random.getRandomFloat(0, 2 * Math.PI)\n        return new Vector3(\n            cx + r * Math.cos(phase),\n            cy + r * Math.sin(phase)\n        )\n    }\n}\n\nexport class Section {\n    constructor(p1, p2) {\n        this.p1 = p1\n        this.p2 = p2\n    }\n\n    get dx() {\n        return this.p2.x - this.p1.x\n    }\n\n    get dy() {\n        return this.p2.y - this.p1.y\n    }\n\n    whichSide(x, y) {\n        const A = x - this.p1.x;\n        const B = y - this.p1.y;\n        const C = this.dx;\n        const D = this.dy;\n        return Math.sign(A * C - B * D);\n    }\n\n    get center() {\n        return {\n            x: 0.5 * (this.p1.x + this.p2.x),\n            y: 0.5 * (this.p1.y + this.p2.y)\n        }\n    }\n\n    nearestPoint(x, y) {\n        const A = x - this.p1.x;\n        const B = y - this.p1.y;\n        const C = this.dx;\n        const D = this.dy;\n\n        const dot = A * C + B * D;\n        const len_sq = C * C + D * D;\n        let param = -1;\n        if (len_sq !== 0) {\n            param = dot / len_sq;\n        }\n\n        if (param < 0) {\n            x = this.p1.x\n            y = this.p1.y\n        } else if (param > 1) {\n            x = this.p2.x\n            y = this.p2.y\n        } else {\n            x = this.p1.x + param * C;\n            y = this.p1.y + param * D;\n        }\n        return {x, y}\n    }\n\n    pDistance(xo, yo) {\n        const nearestPoint1 = this.nearestPoint(xo, yo)\n        return new Section(nearestPoint1, {x: xo, y: yo}).length\n    }\n\n    get length() {\n        const dx = this.dx\n        const dy = this.dy\n        return Math.sqrt(dx * dx + dy * dy)\n    }\n}\n\nexport class Util {\n    static clamp(x, xMin, xMax) {\n        return Math.min(+xMax, Math.max(+xMin, +x))\n    }\n\n    static centerOf(group) {\n        if (!group || !group.length) {\n            return\n        }\n        let sumX = _.sumBy(group, item => item.x)\n        let sumY = _.sumBy(group, item => item.y)\n        return {\n            x: sumX / group.length,\n            y: sumY / group.length\n        }\n    }\n\n    static _signHelper(p1, p2, p3) {\n        return (p1.x - p3.x) * (p2.y - p3.y) - (p2.x - p3.x) * (p1.y - p3.y);\n    }\n\n    static pointInTriangle(pt, threePts) {\n        const [v1, v2, v3] = threePts\n        const d1 = Util._signHelper(pt, v1, v2);\n        const d2 = Util._signHelper(pt, v2, v3);\n        const d3 = Util._signHelper(pt, v3, v1);\n\n        const hasNeg = (d1 < 0) || (d2 < 0) || (d3 < 0);\n        const hasPos = (d1 > 0) || (d2 > 0) || (d3 > 0);\n\n        return !(hasNeg && hasPos);\n    }\n}\n\n\n","const EVENT_TYPE = Object.freeze({\n    CREATE: 'create',\n    DESTROY: 'destroy',\n\n    SLASH: 'slash',\n    IP_ADDRESS: 'ip_address',\n    STATUS: 'status',\n    VERSION: 'version',\n    FORCED_LEAVE: 'forced_to_leave',\n    REQUESTED_LEAVE: 'requested_to_leave',\n    AWARD: 'current_award',\n    BOND_CHANGE: 'bond',\n    OBSERVE_CHAIN: 'observe_chains',\n    ACTIVE_BLOCK_HEIGHT: 'active_block_height',\n})\n\nexport class NodeEvent {\n    constructor(type, node, prevNode, currValue, prevValue) {\n        this.type = type\n        this.node = node\n        this.prevNode = prevNode\n        this.currValue = currValue\n        this.prevValue = prevValue\n        this.isTramp = node ? node.node_address === '' : false\n    }\n\n    toString() {\n        const addr = this.node ? this.node.node_address : '?'\n        return `NodeEvent(${this.type}, ${addr}, ${this.currValue} => ${this.prevValue})`\n    }\n}\n\nNodeEvent.EVENT_TYPE = EVENT_TYPE\n","import _ from \"lodash\";\nimport {NodeEvent} from \"@/helpers/NodeEvent\";\n\nexport const NodeStatus = {\n    Standby: 'Standby',\n    Whitelisted: 'Whitelisted',\n    Disabled: 'Disabled',\n    Active: 'Active',\n    Unknown: 'Unknown',\n}\n\nexport class NodeTracker {\n    constructor(prevNodeList, currNodeList) {\n        this.prev = NodeTracker.prepareNodeList(prevNodeList)\n        this.curr = NodeTracker.prepareNodeList(currNodeList)\n    }\n\n    static convertNode(n) {\n        return {\n            node_address: n.node_address,\n            status: n.status,\n            active_block_height: BigInt(n.active_block_height),\n            bond: BigInt(n.bond),\n            ip_address: n.ip_address,\n            current_award: BigInt(n.current_award),\n            slash_points: n.slash_points,\n            observe_chains: _.sortBy(n.observe_chains, ['chain']),\n            requested_to_leave: Boolean(n.requested_to_leave),\n            forced_to_leave: Boolean(n.forced_to_leave),\n            version: n.version,\n            bond_providers: {\n                node_address: n.bond_providers.node_address,\n                node_operator_fee: BigInt(n.bond_providers.node_operator_fee),\n                providers: _.sortBy(n.bond_providers.providers || [], ['bond', 'bond_address']),\n            },\n            jail: {\n                node_address: n.jail.node_address,\n                release_height: n.jail.release_height,\n                reason: n.jail.reason || \"\"\n            },\n        }\n    }\n\n    static prepareNodeList(nodeList) {\n        nodeList = _.map(nodeList, NodeTracker.convertNode)\n        const nodeListWitNames = _.filter(nodeList, (item) => item.node_address)\n        const trampCount = nodeList.length - nodeListWitNames.length\n        const nodeMap = _.keyBy(nodeListWitNames, 'node_address')\n        const nameSet = _.keys(nodeMap)\n        return {\n            trampCount,\n            nodeMap,\n            nameSet\n        }\n    }\n\n    extractEvents() {\n        const events = []\n        const addEvent = (t, node, prevNode, k) => {\n            k = k || 'node_address'\n            events.push(new NodeEvent(t, node, prevNode, node ? node[k] : '',\n                prevNode ? prevNode[k] : ''))\n        }\n\n        const addedNodeAddresses = _.difference(this.curr.nameSet, this.prev.nameSet)\n        for (const addr of addedNodeAddresses) {\n            const node = this.curr.nodeMap[addr]\n            addEvent(NodeEvent.EVENT_TYPE.CREATE, node, node)\n        }\n\n        const removeNodeAddresses = _.difference(this.prev.nameSet, this.curr.nameSet)\n        for (const addr of removeNodeAddresses) {\n            const node = this.prev.nodeMap[addr]\n            addEvent(NodeEvent.EVENT_TYPE.DESTROY, node, node)\n        }\n\n        const EVENT_TYPES = NodeEvent.EVENT_TYPE\n\n        const keyTypeTable = {\n            'slash_points': EVENT_TYPES.SLASH,\n            'bond': EVENT_TYPES.BOND_CHANGE,\n            'ip_address': EVENT_TYPES.IP_ADDRESS,\n            'status': EVENT_TYPES.STATUS,\n            'active_block_height': EVENT_TYPES.ACTIVE_BLOCK_HEIGHT,\n            'current_award': EVENT_TYPES.AWARD,\n            'observe_chains': EVENT_TYPES.OBSERVE_CHAIN,\n        }\n\n        const commonNodes = _.intersection(this.curr.nameSet, this.prev.nameSet)\n        for (const addr of commonNodes) {\n            const prevNode = this.prev.nodeMap[addr]\n            const currNode = this.curr.nodeMap[addr]\n            const keys = _.union(_.keys(prevNode), _.keys(currNode));\n            const keysChanged = _.filter(keys, (key) => {\n                return !_.isEqual(prevNode[key], currNode[key]);\n            });\n            for (const key of keysChanged) {\n                const eventType = keyTypeTable[key]\n                if (eventType) {\n                    addEvent(eventType, currNode, prevNode, key)\n                }\n                // const oldV = prevNode[key]\n                // const newV = currNode[key]\n                // console.log(addr, key, oldV, newV)\n                // addEvent(`change:${key}`, currNode, prevNode)\n            }\n        }\n\n        return events\n    }\n}\n","import {Vector3} from \"three\";\nimport {Util} from \"@/helpers/MathUtil\";\n\nexport class PhysicalObject {\n    constructor() {\n        this.mass = 1.0\n        this.force = new Vector3()\n        this.velocity = new Vector3()\n        this.friction = 0.0\n        this.attractors = []\n    }\n\n    update(dt) {\n        if(this.attractors.forEach) {\n            this.attractors.forEach(attr => attr.applyForce(this))\n        }\n\n        const acceleration = this.force.multiplyScalar(this.mass)\n        this.velocity.copy(this.velocity.clone().add(acceleration.multiplyScalar(dt)))\n        this.velocity.multiplyScalar(Util.clamp(1.0 - this.friction, 0.0, 1.0))\n        this.realObject.position.add(this.velocity.clone().multiplyScalar(dt))\n    }\n\n    nullifyForce() {\n        this.force.set(0.0, 0.0, 0.0)\n    }\n\n    get radius() {\n        return 1.0\n    }\n\n    applyForceTo(direction, force) {\n        this.force.add(direction.copy().multiplyScalar(force))\n    }\n\n    get realObject() {\n        return this\n    }\n\n    repel(physObj, forceMult = 100.0) {\n        if (physObj === this) {\n            return\n        }\n\n        const thisPos = this.realObject.position\n        const otherPos = physObj.realObject.position\n\n        const d = thisPos.distanceTo(otherPos)\n        const minDistance = this.radius + physObj.radius\n        if (d < minDistance) {\n            const lineDir = thisPos\n                .clone()\n                .sub(otherPos)\n                .normalize()\n                .multiplyScalar(forceMult)\n            this.force.add(lineDir)\n            physObj.force.add(lineDir.negate())\n        }\n    }\n}","import * as THREE from \"three\";\nimport {Vector3} from \"three\";\nimport {Random, Util} from \"@/helpers/MathUtil\";\nimport {NodeStatus} from \"@/helpers/NodeTracker\";\nimport {Text} from 'troika-three-text'\nimport {Colors, Config} from \"@/config\";\nimport {PhysicalObject} from \"@/helpers/physics/PhysicalObject\";\n\n// const geometry = new THREE.SphereGeometry(1, 32, 32)\nconst geometry = new THREE.IcosahedronGeometry(1, 1)\n\nconst minScale = 8.0\nconst maxScale = 52.0\n\nexport class NodeObject extends PhysicalObject {\n    constructor(node) {\n        super()\n\n        this.node = node\n        this.normalizedBond = (Number(this.node.bond / 10_000_000n)) * 0.0000001\n\n        this.o = new THREE.Group()\n\n        this.attractors = []\n        // this.mass = this.normalizedBond * 2.0\n        this.friction = 0.02\n\n        this._makeSphere()\n        this._makeLabel()\n    }\n\n    _makeSphere() {\n        // color\n        let color = 0x111111;\n        const st = this.node.status\n        if (st === NodeStatus.Standby) {\n            color = 0x167a56\n        } else if (st === NodeStatus.Active) {\n            color = Random.getRandomSample([\n                Colors.LightningBlue,\n                Colors.YggdrasilGreen\n            ])\n        } else if (st === NodeStatus.Disabled) {\n            color = 0xee0000\n        } else if (st === NodeStatus.Whitelisted) {\n            color = 0x444444\n        } else if (st === NodeStatus.Unknown) {\n            color = 0x111144\n        }\n\n        // Size (scale): 1 = 1 million Rune\n        const scale = Util.clamp(this.normalizedBond * maxScale * 0.8,\n            minScale, maxScale)\n\n        this.material = new THREE.MeshStandardMaterial({color, flatShading: true});\n        this.mesh = new THREE.Mesh(geometry, this.material);\n        this.mesh.scale.setScalar(scale)\n        this.o.add(this.mesh)\n    }\n\n    get realObject() {\n        return this.o\n    }\n\n    _makeLabel() {\n        const address = this.node.node_address\n        if (address && address.length >= 4) {\n            const nameTextObj = this.nameTextObj = new Text()\n\n            nameTextObj.text = address.slice(-4)\n            nameTextObj.font = Config.Font.Main\n            nameTextObj.fontWeight = 900\n            nameTextObj.fontSize = 15\n            nameTextObj.position.z = 42\n            nameTextObj.color = 0xFFFFFF\n            nameTextObj.anchorX = 'center'\n            nameTextObj.anchorY = 'middle'\n            nameTextObj.outlineWidth = 2.0\n            nameTextObj.sync()\n            this.o.add(nameTextObj)\n        }\n    }\n\n    dispose() {\n        if (this.nameTextObj) {\n            this.nameTextObj.dispose()\n        }\n    }\n\n    get radius() {\n        // return this.mesh.scale.x\n        return Math.max(this.mesh.scale.x, 15)\n    }\n\n    reactChain() {\n        this.mesh.rotateX(1.0)\n        const pos = this.o.position.clone().normalize()\n        const perp = pos.cross(new Vector3(0, 0, 1)).multiplyScalar(100.0)\n        this.velocity.add(perp)\n    }\n\n    reactSlash() {\n        // const velocity = obj.o.position.clone().normalize().multiplyScalar(100)\n        // obj.velocity.copy(velocity)\n\n        const savedColor = this.material.color.clone()\n        this.velocity.set(Random.getRandomFloat(-100, 100), Random.getRandomFloat(-100, 100), 0.0)\n        this.material.color.set(0xff0000)\n        setTimeout(() => {\n            this.material.color.set(savedColor)\n        }, 100)\n    }\n}","import _ from \"lodash\";\n\nexport class Simulation {\n    constructor() {\n        this.objects = {}\n        this.repelForce = 101.0\n    }\n\n    getByName(name) {\n        return this.objects[name]\n    }\n\n    addObject(name, physObj) {\n        const existing = this.getByName(name)\n        if (existing) {\n            console.warn('PhysObj already exists. No nothing')\n            return existing\n        }\n        this.objects[name] = physObj\n    }\n\n    removeObject(name) {\n        const physObj = this.getByName(name)\n        if (!physObj) {\n            console.error('PhysObj not found!')\n            return\n        }\n\n        physObj.dispose()\n        delete this.objects[name]\n    }\n\n    _repelForceCalculation(obj) {\n        for (const otherObj of this.nodeObjList) {\n            if (otherObj !== obj) {\n                obj.repel(otherObj, this.repelForce)\n            }\n        }\n    }\n\n    _updateObject(obj, delta) {\n        obj.nullifyForce()\n        this._repelForceCalculation(obj)\n        obj.update(delta)\n    }\n\n    update(dt) {\n        if (isNaN(dt)) {\n            return\n        }\n        _.forEach(this.nodeObjList, obj => this._updateObject(obj, dt))\n    }\n\n    doNSteps(n, dt = 0.016) {\n        for (let step = 0; step < n; ++step) {\n            this.update(dt)\n        }\n    }\n\n    get nodeObjList() {\n        return _.values(this.objects)\n    }\n\n    dispose() {\n        // for (const otherObj of this.nodeObjList) {\n        //     otherObj.dispose()\n        //     // this.parent.remove(otherObj.realObject)\n        // }\n        this.objects = {}\n    }\n}\n","import * as THREE from \"three\";\nimport {Text} from 'troika-three-text'\nimport {Config} from \"@/config\";\nimport TWEEN from \"tween\";\n\nexport class TitleLabel3D extends THREE.Object3D {\n    constructor(text, scale = 20, rotAngle = -45) {\n        super();\n        this.text = text\n        const t = this.label = new Text()\n        t.font = Config.Font.Main\n        t.fontSize = 10\n        t.scale.set(scale, scale, scale)\n        t.color = 0xFFFFFF\n        t.fillOpacity = 0.5\n        t.anchorX = 'center'\n        t.anchorY = 'middle'\n        t.text = text\n        t.sync()\n        t.rotateX(THREE.MathUtils.degToRad(rotAngle))\n        this.t = t\n        this.add(t)\n        this.animDuration = 500\n        this.animDistance = 1500\n        this.easeType = TWEEN.Easing.Back.Out\n    }\n\n    animateIn() {\n        this.t.position.z = this.animDistance\n        this.t.material.opacity = 0.0\n\n        new TWEEN.Tween(this.t.position)\n            .to({z: 0}, this.animDuration)\n            .easing(this.easeType)\n            .start()\n\n        new TWEEN.Tween(this.t.material)\n            .to({opacity: 1.0}, this.animDuration)\n            .easing(this.easeType)\n            .start()\n    }\n\n    animateOut(kill=false) {\n        const expandedDuration = this.animDuration * 5\n        new TWEEN.Tween(this.t.position)\n            .to({z: -this.animDistance * 5}, expandedDuration)\n            .easing(this.easeType)\n            .start()\n\n        new TWEEN.Tween(this.t.material)\n            .to({opacity: 0.0}, expandedDuration)\n            .easing(this.easeType)\n            .start().onComplete(() => {\n            if(kill) {\n                this.parent.remove(this)\n            }\n        })\n    }\n}","import {TitleLabel3D} from \"@/visual/TitleLabel3D\";\n\nexport class ModeBase {\n    constructor(scene) {\n        this.scene = scene\n        this.labels = []\n    }\n\n    handleObject(physObj) {\n        +physObj // do nothing\n    }\n\n    makeLabel(text, position, scale = 20) {\n        if (!text) {\n            return\n        }\n\n        const titleLabel = new TitleLabel3D(text, scale)\n        titleLabel.position.copy(position)\n        this.scene.add(titleLabel)\n        this.labels.push(titleLabel)\n        return titleLabel\n    }\n\n    onEnter() {\n        this.labels.forEach(label => label.animateIn())\n    }\n\n    onLeave() {\n        this.labels.forEach(label => label.animateOut(true))\n        this.labels = []\n    }\n\n    update(dt) {\n        +dt\n    }\n}","export class Attractor {\n    constructor(position,\n                constCoeff = 0, linearCoeff = 0, quadraticCoeff = 0,\n                radius = -1.0,\n                relaxRadius = 0.0) {\n        this.position = position\n        this.constCoeff = constCoeff\n        this.linearCoeff = linearCoeff\n        this.quadraticCoeff = quadraticCoeff\n        this.radius = radius\n        this.relaxRadius = relaxRadius\n    }\n\n    applyForceToDistance(physObj, distance, toPosition) {\n        const objPosition = physObj.realObject.position\n        const magnitude = this.constCoeff + distance * this.linearCoeff + distance * distance * this.quadraticCoeff\n        physObj.force.add(toPosition.clone().sub(objPosition).normalize().multiplyScalar(magnitude))\n    }\n\n    applyForce(physObj) {\n        const objPosition = physObj.realObject.position\n        const distance = this.position.distanceTo(objPosition)\n        const infiniteRadius = this.radius <= 0.0\n        if ((infiniteRadius || distance <= this.radius) && distance > this.relaxRadius) {\n            this.applyForceToDistance(physObj, distance, this.position)\n        }\n    }\n}","import _ from \"lodash\";\nimport {Section, Util} from \"@/helpers/MathUtil\";\nimport {Attractor} from \"@/helpers/physics/Attractor\";\nimport * as THREE from \"three\";\n\n\nexport class AttractorShape extends Attractor {\n    constructor(triangles, constCoeff = 0, linearCoeff = 0, quadraticCoeff = 0) {\n        const center = Util.centerOf(_.flatten(triangles))\n        super(new THREE.Vector3(center.x, center.y, 0.0),\n            constCoeff, linearCoeff, quadraticCoeff, 0, 0)\n        this.triangles = triangles\n        this.center = center\n    }\n\n    get allSectors() {\n        const sectors = []\n        for(const triangle of this.triangles) {\n            sectors.push(new Section(triangle[0], triangle[1]))\n            sectors.push(new Section(triangle[1], triangle[2]))\n            sectors.push(new Section(triangle[2], triangle[0]))\n        }\n        return sectors\n    }\n\n    applyForce(physObj) {\n        if (!this.triangles || !this.triangles.length) {\n            return\n        }\n        const objPosition = physObj.realObject.position\n        const p = {x: objPosition.x, y: objPosition.y}\n        const relaxed = _.some(this.triangles, tri => Util.pointInTriangle(p, tri))\n        if (relaxed) {\n            return\n        }\n\n        const neartestSector = _.minBy(this.allSectors, sector => sector.pDistance(p.x, p.y))\n        const neartestPoint = neartestSector.nearestPoint(p.x, p.y)\n        const distance = new Section(neartestPoint, p).length\n        this.applyForceToDistance(physObj, distance, new THREE.Vector3(neartestPoint.x, neartestPoint.y, 0.0))\n    }\n}","export class THORChainLogoShape {\n    static original() {\n        return [\n            [\n                {x: 0, y: 0},\n                {x: 133, y: -133},\n                {x: -238, y: -291},\n            ],\n            [\n                {x: 0, y: 0},\n                {x: -133, y: 135},\n                {x: 291, y: 311},\n            ]\n        ]\n    }\n\n    static triangles(dx = 0, dy = 0, scale = 1.0) {\n        const transformed = []\n        for(const triangle of this.original()) {\n            const pts = []\n            for(const {x, y} of triangle) {\n                pts.push({\n                    x: x * scale + dx,\n                    y: y * scale + dy\n                })\n            }\n            transformed.push(pts)\n        }\n        return transformed\n    }\n}\n","import {ModeBase} from \"@/visual/modes/ModeBase\";\nimport * as THREE from \"three\";\nimport {Config} from \"@/config\";\nimport {AttractorShape} from \"@/helpers/physics/AttractorShape\";\nimport {THORChainLogoShape} from \"@/helpers/physics/TCLogoShape\";\n\nexport class ModeNormal extends ModeBase {\n    constructor(scene) {\n        super(scene);\n\n        this._circleRadius = 350.0\n        const force = Config.Physics.BaseForce\n        this.tcAttractor = new AttractorShape(THORChainLogoShape.triangles(0, 100, 1.8), force)\n    }\n\n    handleObject(physObj) {\n        super.handleObject(physObj);\n        physObj.attractors = [this.tcAttractor]\n    }\n\n    onEnter() {\n        this.makeLabel('THORChain', new THREE.Vector3(0, -580, -100), 18)\n        super.onEnter();\n    }\n}","import {ModeBase} from \"@/visual/modes/ModeBase\";\nimport {NodeStatus} from \"@/helpers/NodeTracker\";\nimport {Attractor} from \"@/helpers/physics/Attractor\";\nimport * as THREE from \"three\";\nimport {Config} from \"@/config\";\n\nconst ANY_STATUS = '*'\n\nexport class ModeStatus extends ModeBase {\n    constructor(scene) {\n        super(scene);\n\n        this._circleRadius = 350.0\n        this._sideDistance = 600\n\n        const force = Config.Physics.BaseForce\n        this.attractors = {\n            [NodeStatus.Active]: [\n                new Attractor(new THREE.Vector3(0.0, 0, 0), force, 0, 0, 0, this._circleRadius),\n            ],\n            [NodeStatus.Standby]: [\n                new Attractor(new THREE.Vector3(-this._sideDistance, 0, 0), force, 0, 0, 0, this._circleRadius * 0.3),\n                new Attractor(new THREE.Vector3(-this._sideDistance, 0, 0), force * 0.02),\n            ],\n            [ANY_STATUS]: [\n                new Attractor(new THREE.Vector3(this._sideDistance, 0, 0), force, 0, 0, 0, this._circleRadius * 0.3),\n                new Attractor(new THREE.Vector3(this._sideDistance, 0, 0), force * 0.02),\n            ],\n        }\n    }\n\n    handleObject(physObj) {\n        super.handleObject(physObj);\n\n        physObj.attractors = []\n\n        const bestAttractors = this.attractors[physObj.node.status]\n        if (bestAttractors) {\n            physObj.attractors = bestAttractors\n        } else {\n            physObj.attractors = this.attractors[ANY_STATUS]\n        }\n    }\n\n    onEnter() {\n        this.makeLabel('Active', new THREE.Vector3(0, -500, 0), 20)\n        this.makeLabel('Standby', new THREE.Vector3(-this._sideDistance, -400, 0), 12)\n        this.makeLabel('Other', new THREE.Vector3(this._sideDistance, -400, 0), 12)\n        super.onEnter();\n    }\n}\n","import * as THREE from \"three\";\nimport {PhysicalObject} from \"@/helpers/physics/PhysicalObject\";\nimport {Attractor} from \"@/helpers/physics/Attractor\";\nimport {Simulation} from \"@/helpers/physics/Simulation\";\nimport _ from \"lodash\";\n\n\nclass VirtualObject extends PhysicalObject {\n    constructor(x, y, r, name, attractor, friction) {\n        super();\n        this.name = name\n        this.position = new THREE.Vector3(x, y, 0)\n        this._radius = r\n        this.attractors = [attractor]\n        this.friction = friction\n    }\n\n    get radius() {\n        return this._radius\n    }\n}\n\nexport class CirclePack {\n    constructor(force, boundRadius, repelForce = 600, friction = 0.02, iterSteps = 1) {\n        this.force = force\n        this.boundRadius = boundRadius\n        this.cicles = []\n        this.iterSteps = iterSteps\n        this.dt = 0.05\n        this.simulation = new Simulation()\n        this.simulation.repelForce = repelForce\n        this.friction = friction\n\n        this.metaAttractor = new Attractor(new THREE.Vector3(),\n            this.force, 0, 0, -1, 0)\n    }\n\n    addCircle(name, radius) {\n        this.cicles.push({\n            name, radius\n        })\n    }\n\n    arrangeAroundCenter() {\n        if (!this.cicles.length) {\n            return this\n        }\n\n        const deltaAngle = Math.PI * 2 / this.cicles.length\n        const r = this.boundRadius * 0.5 * 0.8\n        let angle = 0.0\n\n        for (const {name, radius} of this.cicles) {\n            this.simulation.addObject(\n                name,\n                new VirtualObject(\n                    r * Math.cos(angle),\n                    r * Math.sin(angle),\n                    radius,\n                    name,\n                    this.metaAttractor,\n                    this.friction,\n                )\n            )\n            angle += deltaAngle\n        }\n        return this\n    }\n\n    clear() {\n        this.cicles = []\n        this.simulation.dispose()\n    }\n\n    pack(dt, steps) {\n        if (!this.cicles.length) {\n            return this\n        }\n        dt = dt || this.dt\n        steps = steps || this.iterSteps\n        this.simulation.doNSteps(steps, dt)\n        return this\n    }\n\n    getResults() {\n        const results = {}\n        for (const [name, obj] of _.entries(this.simulation.objects)) {\n            results[name] = {\n                position: obj.position,\n                radius: obj.radius\n            }\n        }\n        return results\n    }\n}","import axios from \"axios\";\nimport lscache from \"lscache\";\n\nexport class IPAddressInfo {\n    constructor(j) {\n        this.ipAddress = j['ip']\n        this.countryCode = j['country_code']\n        this.country = j['country']\n        this.latitude = j['latitude']\n        this.longitude = j['longitude']\n        this.providerName = j['org']\n    }\n}\n\n\nexport const UNKNOWN = 'UNKNOWN'\n\n\nexport class IPAddressInfoLoader {\n    constructor(expireMinutes = 24 * 60) {\n        this.expireMinutes = expireMinutes\n        this._key = 'IPInfo2'\n    }\n\n    url(ip) {\n        // return `http://ip-api.com/json/${ip}?fields=status,message,countryCode,region,regionName,city,lat,lon,isp,org,asname,query`\n        return `https://settings.thornode.org/api/node/ip/${ip}`\n    }\n\n    async loadFromService(ip) {\n        const r = await axios.get(this.url(ip))\n        console.info(`Loaded IP info for (${ip}) => ${r.status}`)\n        return new IPAddressInfo(r.data)\n    }\n\n    loadFromCache(ip) {\n        return lscache.get(`${this._key}:${ip}`)\n    }\n\n    saveToCache(data) {\n        if (!data || !data.ipAddress) {\n            console.warn('no data to save!')\n            return\n        }\n        const ip = data.ipAddress\n        lscache.set(`${this._key}:${ip}`, data, this.expireMinutes)\n    }\n\n    async load(ip) {\n        let data = this.loadFromCache(ip)\n        if (data) {\n            return data\n        }\n        data = await this.loadFromService(ip)\n        this.saveToCache(data)\n        return data\n    }\n\n    static refineProviderName(name) {\n        if(name === undefined) {\n            return UNKNOWN\n        }\n        const old = name + ''\n\n        name = name.toUpperCase()\n        for(const component of name.split('-')) {\n            if(component !== 'AS') {\n                return component\n            }\n        }\n        name = name.replace('ONLINE GMBH', '')\n        console.info(old, '=>', name)\n        return name\n    }\n}\n","import {ModeBase} from \"@/visual/modes/ModeBase\";\nimport {CirclePack} from \"@/helpers/physics/CirclePack\";\nimport _ from \"lodash\";\nimport {Attractor} from \"@/helpers/physics/Attractor\";\nimport * as THREE from \"three\";\nimport {Config} from \"@/config\";\nimport {IPAddressInfoLoader, UNKNOWN} from \"@/helpers/data/IPAddressInfo\";\n\n\nexport class ModeProvider extends ModeBase {\n    constructor(scene) {\n        super(scene);\n        this._attractorBanish = new Attractor(new THREE.Vector3(0, 0, 0), -100.0)\n        this.attractors = {}\n        this.force = Config.Physics.BaseForce\n        this.circlePacker = new CirclePack(this.force, 1200, 300, 0.02, 1)\n    }\n\n    createProviderAttractors(objList) {\n        const providers = {}\n        for (const nodeObj of objList) {\n            const ipInfo = nodeObj.ipInfo\n            const provider = IPAddressInfoLoader.refineProviderName(ipInfo ? ipInfo.providerName : UNKNOWN)\n            const current = providers[provider] ?? 0\n            providers[provider] = current + 1\n        }\n\n        this.circlePacker.clear()\n        this.attractors = {}\n        for (const [name, count] of _.entries(providers)) {\n            const circleRadius = Math.sqrt(+count) * 100.0\n            console.log(name, circleRadius)\n\n            this.circlePacker.addCircle(name, circleRadius)\n            this.attractors[name] = new Attractor(new THREE.Vector3(),\n                this.force, 0, 0, 0, Math.sqrt(+count) * 20)\n        }\n        this.circlePacker.arrangeAroundCenter()\n        this._transferAttractorsPositionFromPacker()\n        this._makeLabels()\n    }\n\n    _makeLabels() {\n        const packedPositions = this.circlePacker.getResults()\n        for (const [name, {position}] of _.entries(packedPositions)) {\n            this.makeLabel(name, new THREE.Vector3(position.x, position.y - 150.0, 200.0), 5)\n        }\n    }\n\n    _transferAttractorsPositionFromPacker() {\n        const packedPositions = this.circlePacker.getResults()\n        for (const [name, {position}] of _.entries(packedPositions)) {\n            const attr = this.attractors[name]\n            if (attr) {\n                attr.position.copy(position)\n            } else {\n                console.warn(`no attr for ${name}`)\n            }\n        }\n    }\n\n    update() {\n        // this.circlePacker.pack(dt)\n        this._transferAttractorsPositionFromPacker()\n    }\n\n    handleObject(physObj) {\n        super.handleObject(physObj);\n\n        if (!physObj) {\n            return;\n        }\n\n        let groupName = IPAddressInfoLoader.refineProviderName(\n            (physObj.ipInfo && physObj.ipInfo.providerName) ? physObj.ipInfo.providerName : UNKNOWN\n        )\n        physObj.attractors = [(this.attractors[groupName] ?? this._attractorBanish)]\n    }\n}","import {Random} from \"@/helpers/MathUtil\";\nimport {NodeObject} from \"@/visual/NodeObject\";\nimport {NodeEvent} from \"@/helpers/NodeEvent\";\nimport {clearObject} from \"@/helpers/3D\";\nimport {Config} from \"@/config\";\nimport {Simulation} from \"@/helpers/physics/Simulation\";\nimport {ModeNormal} from \"@/visual/modes/ModeNormal\";\nimport {ModeStatus} from \"@/visual/modes/ModeStatus\";\nimport {ModeProvider} from \"@/visual/modes/ModeProvider\";\n\nexport const NodeGroupModes = Object.freeze({\n    Normal: 'normal',\n    Status: 'status',\n    Provider: 'provider',\n})\n\nexport class NodeGroup extends Simulation {\n    constructor(parent) {\n        super()\n\n        this._currentIdent = 0\n        this.parent = parent\n\n        this._modeNormal = new ModeNormal(this.parent)\n        this._modeStatus = new ModeStatus(this.parent)\n        this._modeProvider = new ModeProvider(this.parent)\n\n        this._selectedModeHandler = this._modeNormal\n        this.mode = NodeGroupModes.Normal\n\n        this._startPositionBounds = {\n            xMin: -60, xMax: 60,\n            yMin: -40, yMax: 40,\n            zMin: 0, zMax: 0,\n        }\n    }\n\n    genIdent(node) {\n        return node.node_address ?? String(this._currentIdent++)\n    }\n\n    _placeNodeObject(nodeObject) {\n        // const pos = Random.randomVector(this._startPositionBounds)\n        const pos = Random.randomOnCircle(2000.0)\n        nodeObject.o.position.copy(pos)\n        this.parent.add(nodeObject.o)\n    }\n\n    createNewNode(node) {\n        const ident = this.genIdent(node)\n        const existing = this.getByName(ident)\n        if (existing) {\n            console.warn('NodeObject already exists. No nothing')\n            return existing\n        }\n\n        console.info(`Create node ${ident}.`)\n\n        const nodeObject = new NodeObject(node)\n        this.parent.add(nodeObject.o)\n        this._placeNodeObject(nodeObject)\n        this.addObject(ident, nodeObject)\n        return nodeObject\n    }\n\n    destroyNode(node) {\n        const nodeAddress = node.node_address ?? node\n        const nodeObject = this.getByName(nodeAddress)\n        if (!nodeObject) {\n            console.error('node not found!')\n            return\n        }\n\n        console.info(`Destroy node ${nodeAddress}.`)\n        nodeObject.dispose()\n        this.parent.remove(nodeObject.o)\n        super.removeObject(nodeAddress)\n    }\n\n    set mode(newMode) {\n        this._mode = newMode\n\n        this._selectedModeHandler.onLeave()\n\n        if (this._mode === NodeGroupModes.Normal) {\n            this._selectedModeHandler = this._modeNormal\n        } else if(this._mode === NodeGroupModes.Status) {\n            this._selectedModeHandler = this._modeStatus\n        } else if(this._mode === NodeGroupModes.Provider) {\n            this._modeProvider.createProviderAttractors(this.nodeObjList)\n            this._selectedModeHandler = this._modeProvider\n        }\n\n        this._selectedModeHandler.onEnter()\n\n        console.log(`Set Mode: ${newMode}`)\n    }\n\n    _updateObject(obj, delta) {\n        this._selectedModeHandler.handleObject(obj)\n        super._updateObject(obj, delta)\n    }\n\n    reactEvent(event) {\n        const delay = Random.getRandomFloat(0, Config.DataSource.ReactRandomDelay * 1000.0)\n        setTimeout(() => {\n            const obj = this.getByName(event.node.node_address)\n            if (obj) {\n                if (event.type === NodeEvent.EVENT_TYPE.OBSERVE_CHAIN) {\n                    obj.reactChain()\n                } else if (event.type === NodeEvent.EVENT_TYPE.SLASH) {\n                    obj.reactSlash()\n                }\n            }\n        }, delay)\n    }\n\n    update(dt) {\n        this._selectedModeHandler.update(dt)\n        return super.update(dt);\n    }\n\n    dispose() {\n        super.dispose()\n        clearObject(this.parent)\n        for (const otherObj of this.nodeObjList) {\n            otherObj.dispose()\n        }\n    }\n}","import axios from \"axios\";\n\nexport class URLDataSource {\n    constructor(url, period) {\n        this.period = period\n        this.url = url\n        this._isRunning = false\n        this._timer = 0\n        this.callback = () => 0\n    }\n\n    run() {\n        if (this._isRunning) {\n            console.warn(`${this.toString()} is already running`)\n            return\n        }\n        this._isRunning = true\n\n        console.info(`${this.toString()} started!`)\n\n        this._tick().then()\n\n        this._timer = setInterval(() => {\n            this._tick().then()\n        }, this.period * 1000)\n    }\n\n    stop() {\n        if (this._isRunning) {\n            clearInterval(this._timer)\n            this._timer = 0\n            this._isRunning = false\n            console.info(`${this.toString()} stopped.`)\n        }\n    }\n\n    toString() {\n        return `URLDataSource(${this.url}, ${this.period} sec)`\n    }\n\n    get isRunning() {\n        return this._isRunning\n    }\n\n    async _tick() {\n        try {\n            const data = await axios.get(this.url, {\n                headers: {\n                    'Content-type': 'application/json'\n                }\n            })\n            if (this.callback) {\n                this.callback(data.data)\n            }\n        } catch (e) {\n            console.error(`${this.toString()} tick failed: ${e}`)\n            throw e\n        }\n    }\n}","import * as THREE from \"three\";\nimport {NodeGroup} from \"@/visual/NodeGroup\";\nimport {NodeTracker} from \"@/helpers/NodeTracker\";\nimport {NodeEvent} from \"@/helpers/NodeEvent\";\nimport {URLDataSource} from \"@/helpers/data/URLDataSource\";\nimport {Config} from \"@/config\";\nimport {clearObject} from \"@/helpers/3D\";\nimport {IPAddressInfoLoader} from \"@/helpers/data/IPAddressInfo\";\n\nexport class MainScene {\n    constructor(scene, vueComp) {\n        this.scene = scene\n        this.vueComp = vueComp\n        this.prevNodes = []\n        this.nodes = []\n\n        this._makeSomeLight()\n        this.nodeGroup = new NodeGroup(this.scene)\n\n        this._runDataSource()\n    }\n\n    _runDataSource() {\n        this.dataSource = new URLDataSource(Config.DataSource.NodesURL, Config.DataSource.PollPeriod)\n        this.dataSource.callback = (data) => {\n            this.handleData(data)\n        }\n\n        this.dataSource.run()\n\n        this.ipAddressLoader = new IPAddressInfoLoader()\n    }\n\n    _makeSomeLight() {\n        const light = new THREE.DirectionalLight('hsl(0, 100%, 100%)')\n        light.position.set(0, 10, 1000)\n        this.scene.add(light)\n\n        const ambientLight = new THREE.AmbientLight(0x404040); // soft white light\n        this.scene.add(ambientLight);\n    }\n\n    async _loadAdditionalInfoAbout(obj) {\n        const ipAddress = obj.node.ip_address\n        if(ipAddress) {\n            // todo: request limit => use own API\n            obj.ipInfo = await this.ipAddressLoader.load(ipAddress)\n        }\n    }\n\n    handleData(nodes) {\n        console.info('Handle Data tick!')\n\n        // Random.removeRandomItem(nodes)\n\n        this.prevNodes = this.nodes\n        this.nodes = nodes\n        const tracker = new NodeTracker(this.prevNodes, this.nodes)\n        const events = tracker.extractEvents()\n\n        for (const event of events) {\n            const node = event.node\n            if (node.node_address) {\n                if (event.type === NodeEvent.EVENT_TYPE.CREATE) {\n                    const obj = this.nodeGroup.createNewNode(node)\n                    this._loadAdditionalInfoAbout(obj).then()\n                } else if (event.type === NodeEvent.EVENT_TYPE.DESTROY) {\n                    this.nodeGroup.destroyNode(node)\n                } else {\n                    this.nodeGroup.reactEvent(event)\n                }\n            }\n        }\n\n        if (events.length) {\n            this.vueComp.pokeActivity()\n        }\n    }\n\n    update(delta) {\n        this.nodeGroup.update(delta)\n    }\n\n    dispose() {\n        this.dataSource.stop()\n        this.nodeGroup.dispose()\n        clearObject(this.scene)\n    }\n}","import { render } from \"./MainScreen.vue?vue&type=template&id=60441905\"\nimport script from \"./MainScreen.vue?vue&type=script&lang=js\"\nexport * from \"./MainScreen.vue?vue&type=script&lang=js\"\n\nimport \"./MainScreen.vue?vue&type=style&index=0&id=60441905&lang=css\"\n\nimport exportComponent from \"/Users/tirinox/Projects/thorviz/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=edc0535e\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=edc0535e&lang=css\"\n\nimport exportComponent from \"/Users/tirinox/Projects/thorviz/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import {createApp} from 'vue'\nimport App from './App.vue'\nimport mitt from 'mitt';\nimport CameraControls from \"camera-controls\";\n\nimport * as THREE from 'three';\n\nCameraControls.install({THREE});\n\nconst emitter = mitt();\nconst app = createApp(App);\napp.config.globalProperties.emitter = emitter;\napp.mount('#app')","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkthorviz\"] = self[\"webpackChunkthorviz\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(2922); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["_createBlock","_component_MainScreen","class","_createElementBlock","_createElementVNode","ref","tabindex","onKeydown","$options","onMousemove","onMouseenter","onMouseleave","_createVNode","_component_FPSCounter","$data","onClick","Config","DataSource","NodesURL","PollPeriod","ReactRandomDelay","Font","Main","Effects","Bloom","Enabled","Strength","Threshold","Radius","Controls","Camera","Distance","Min","Max","Start","AzimuthAngleLimit","PolarAngleLimit","Scene","Sky","SkyBox","SkyBoxExt","Physics","BaseForce","Colors","LightningBlue","YggdrasilGreen","MidgardTurqoise","NightBlack","_toDisplayString","Number","toFixed","countObjects","parent","numOfMeshes","traverse","clearObject","obj","remove","apply","children","name","props","updatePeriod","type","default","data","fps","objCount","activityIndicator","lastUpdateTime","methods","pokeActivity","this","setTimeout","update","delta","scene","Date","now","__exports__","defaultValue","x","undefined","Random","max","Math","floor","random","min","array","index","getRandomInt","length","splice","xMin","xMax","yMin","yMax","zMin","zMax","Vector3","getRandomFloat","r","cx","cy","phase","PI","cos","sin","Section","constructor","p1","p2","dx","dy","y","whichSide","A","B","C","D","sign","center","nearestPoint","dot","len_sq","param","pDistance","xo","yo","nearestPoint1","sqrt","Util","group","sumX","_","item","sumY","p3","pt","threePts","v1","v2","v3","d1","_signHelper","d2","d3","hasNeg","hasPos","EVENT_TYPE","Object","freeze","CREATE","DESTROY","SLASH","IP_ADDRESS","STATUS","VERSION","FORCED_LEAVE","REQUESTED_LEAVE","AWARD","BOND_CHANGE","OBSERVE_CHAIN","ACTIVE_BLOCK_HEIGHT","NodeEvent","node","prevNode","currValue","prevValue","isTramp","node_address","toString","addr","NodeStatus","Standby","Whitelisted","Disabled","Active","Unknown","NodeTracker","prevNodeList","currNodeList","prev","prepareNodeList","curr","n","status","active_block_height","BigInt","bond","ip_address","current_award","slash_points","observe_chains","requested_to_leave","Boolean","forced_to_leave","version","bond_providers","node_operator_fee","providers","jail","release_height","reason","nodeList","convertNode","nodeListWitNames","trampCount","nodeMap","nameSet","extractEvents","events","addEvent","t","k","push","addedNodeAddresses","removeNodeAddresses","EVENT_TYPES","keyTypeTable","commonNodes","currNode","keys","keysChanged","key","eventType","PhysicalObject","mass","force","velocity","friction","attractors","dt","forEach","attr","applyForce","acceleration","multiplyScalar","copy","clone","add","clamp","realObject","position","nullifyForce","set","radius","applyForceTo","direction","repel","physObj","forceMult","thisPos","otherPos","d","distanceTo","minDistance","lineDir","sub","normalize","negate","geometry","THREE","minScale","maxScale","NodeObject","super","normalizedBond","o","_makeSphere","_makeLabel","color","st","getRandomSample","scale","material","flatShading","mesh","setScalar","address","nameTextObj","Text","text","slice","font","fontWeight","fontSize","z","anchorX","anchorY","outlineWidth","sync","dispose","reactChain","rotateX","pos","perp","cross","reactSlash","savedColor","Simulation","objects","repelForce","getByName","addObject","existing","console","warn","removeObject","error","_repelForceCalculation","otherObj","nodeObjList","_updateObject","isNaN","doNSteps","step","TitleLabel3D","rotAngle","label","fillOpacity","animDuration","animDistance","easeType","TWEEN","animateIn","opacity","to","easing","start","animateOut","kill","expandedDuration","onComplete","ModeBase","labels","handleObject","makeLabel","titleLabel","onEnter","onLeave","Attractor","constCoeff","linearCoeff","quadraticCoeff","relaxRadius","applyForceToDistance","distance","toPosition","objPosition","magnitude","infiniteRadius","AttractorShape","triangles","centerOf","allSectors","sectors","triangle","p","relaxed","tri","pointInTriangle","neartestSector","sector","neartestPoint","THORChainLogoShape","transformed","original","pts","ModeNormal","_circleRadius","tcAttractor","ANY_STATUS","ModeStatus","_sideDistance","bestAttractors","VirtualObject","attractor","_radius","CirclePack","boundRadius","iterSteps","cicles","simulation","metaAttractor","addCircle","arrangeAroundCenter","deltaAngle","angle","clear","pack","steps","getResults","results","IPAddressInfo","j","ipAddress","countryCode","country","latitude","longitude","providerName","UNKNOWN","IPAddressInfoLoader","expireMinutes","_key","url","ip","axios","info","loadFromCache","lscache","saveToCache","loadFromService","old","toUpperCase","component","split","replace","ModeProvider","_attractorBanish","circlePacker","createProviderAttractors","objList","nodeObj","ipInfo","provider","refineProviderName","current","count","circleRadius","log","_transferAttractorsPositionFromPacker","_makeLabels","packedPositions","groupName","NodeGroupModes","Normal","Status","Provider","NodeGroup","_currentIdent","_modeNormal","_modeStatus","_modeProvider","_selectedModeHandler","mode","_startPositionBounds","genIdent","String","_placeNodeObject","nodeObject","randomOnCircle","createNewNode","ident","destroyNode","nodeAddress","newMode","_mode","reactEvent","event","delay","URLDataSource","period","_isRunning","_timer","callback","run","_tick","then","setInterval","stop","clearInterval","isRunning","headers","e","MainScene","vueComp","prevNodes","nodes","_makeSomeLight","nodeGroup","_runDataSource","dataSource","handleData","ipAddressLoader","light","ambientLight","load","tracker","_loadAdditionalInfoAbout","components","FPSCounter","showFps","mouseEnterX","mouseEnterY","sceneMode","onKeyDown","code","resetCamera","onMouseMove","clientX","clientY","controls","rotate","onMouseEnter","onMouseLeave","reset","resizeRendererToDisplaySize","renderer","canvas","domElement","width","clientWidth","height","clientHeight","camera","aspect","updateProjectionMatrix","needResize","setSize","bloomPass","composer","render","clock","getDelta","$refs","content","requestAnimationFrame","createCamera","window","innerWidth","innerHeight","createCameraControl","CameraControls","cfg","dragToOffset","maxDistance","minAzimuthAngle","maxAzimuthAngle","minPolarAngle","maxPolarAngle","makeSkybox","baseURL","ext","urls","background","makeRenderer","antialias","logarithmicDepthBuffer","devicePixelRatio","setPixelRatio","renderScene","RenderPass","EffectComposer","addPass","bloomCfg","UnrealBloomPass","buildScene","setSceneMode","isButtonSelectedClass","modeName","mounted","unmounted","MainScreen","computed","created","document","title","preloading","preloadFont","characters","emitter","mitt","app","createApp","App","config","globalProperties","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","id","loaded","__webpack_modules__","call","m","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","every","getter","__esModule","a","definition","defineProperty","enumerable","get","g","globalThis","Function","prop","prototype","hasOwnProperty","Symbol","toStringTag","value","nmd","paths","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}