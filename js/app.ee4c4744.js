(function(){"use strict";var e={552:function(e,t,s){var n=s(9242),i=s(3396);function o(e,t,s,n,o,a){const r=(0,i.up)("MainScreen");return(0,i.wg)(),(0,i.j4)(r)}const a={class:"container"},r={class:"canvas-container"},c={class:"ui-container"};function l(e,t,s,o,l,d){const h=(0,i.up)("FPSCounter"),u=(0,i.up)("LoadingIndicator"),p=(0,i.up)("ControlPanel"),m=(0,i.up)("NodeDetailsWindow");return(0,i.wg)(),(0,i.iD)("div",a,[(0,i._)("div",r,[(0,i._)("canvas",{ref:"canvas",class:"canvas-full",tabindex:"1",onKeypress:t[0]||(t[0]=(0,n.iM)(((...e)=>d.onKeyDown&&d.onKeyDown(...e)),["prevent"])),onMousemove:t[1]||(t[1]=(...e)=>d.onMouseMove&&d.onMouseMove(...e)),onMouseenter:t[2]||(t[2]=(...e)=>d.onMouseEnter&&d.onMouseEnter(...e)),onMouseleave:t[3]||(t[3]=(...e)=>d.onMouseLeave&&d.onMouseLeave(...e)),onClick:t[4]||(t[4]=(0,n.iM)(((...e)=>d.onClick&&d.onClick(...e)),["prevent"]))},null,544),(0,i.wy)((0,i.Wm)(h,{ref:"fps"},null,512),[[n.F8,l.showFps]]),l.isLoading?((0,i.wg)(),(0,i.j4)(u,{key:0})):(0,i.kq)("",!0),l.fullyLoaded?((0,i.wg)(),(0,i.j4)(p,{key:1,onModeSelected:d.setSceneMode},null,8,["onModeSelected"])):(0,i.kq)("",!0)]),(0,i._)("div",c,[((0,i.wg)(),(0,i.j4)(i.Ob,null,[l.nodeDetailsVisible?((0,i.wg)(),(0,i.j4)(m,{key:0,node:l.nodeToViewDetails,"node-set":l.nodeSet,onClose:d.onCloseDetails},null,8,["node","node-set","onClose"])):(0,i.kq)("",!0)],1024))])])}var d=s(1114);const h=!0,u={DataSource:{NodesURL:h?"https://thornode.ninerealms.com":"http://localhost:8080/data/samplenodes.json",Nodes:{PollPeriod:3e3},LastBlock:{PollPeriod:1e4},ReactRandomDelay:500,NodeJuggler:{Enabled:!0}},Font:{Main:"fonts/Exo2-VariableFont_wght.ttf"},Effects:{Bloom:{Enabled:!0,Strength:.9,Threshold:.5,Radius:1.2}},Controls:{Camera:{Distance:{Min:800,Max:2900,Start:2e3},AzimuthAngleLimit:180,PolarAngleLimit:180,MouseMoveStrength:2e-4,Animation:{Duration:500,DistanceWhenZoomed:300,Shift:{X:-200}}}},Scene:{InitialMode:"version",Background:{Enabled:!1},Sky:{SkyBox:"texture/skybox/star",SkyBoxExt:"png"},NodeObject:{Simple:!1,PlaneScale:1,MinRadius:12,MaxScale:80,MinScale:10,ScaleFactor:1,RadiusFactor:.3,Animation:{ReactStatus:{DurationIn:500,DurationOut:1250,BloatScale:1.5},ReactSlash:{Force:100,RedDuration:150}}},Globe:{Enabled:!0,Details:64,Radius:600,NodeElevation:20,TextureMap:"texture/globe/2k_earth_nightmap.jpeg",Clouds:{ElevationScale:1.005,Opacity:.05,Texture:"texture/globe/earth_atmo.jpeg"},Atmosphere:{ElevationScale:1.15},InnerAtmosphere:{Enabled:!0}}},Physics:{BaseForce:3500,RepelForce:200,Startup:{SimulationSteps:10,DeltaTime:.1},BaseFriction:.07,MaxSpeedSq:Math.pow(15e3,2),Attractor:{Flat:{DeltaZ:1}}},Debug:{ShowFPS:!1},Renderer:{LogZBuffer:!0}},p={LightningBlue:52479,YggdrasilGreen:3407769,MidgardTurqoise:2350280,NightBlack:1055009};var m=s(2071),v=s(2338),f=s(9868),g=s(7139);const y={class:"fps-counter"},_={class:"activity"};function b(e,t,s,o,a,r){return(0,i.wg)(),(0,i.iD)("div",y,[(0,i._)("span",null,[(0,i._)("strong",null,(0,g.zw)(Number(a.fps).toFixed(2)),1),(0,i.Uk)(" FPS, "+(0,g.zw)(a.objCount)+" objects",1)]),(0,i.wy)((0,i._)("span",_,"•",512),[[n.F8,a.activityIndicator]])])}function S(e){let t=0;return e.traverse((function(){t++})),t}function w(e){e&&e.remove.apply(e,e.children)}function x(e,t,s=1){const n=Math.PI*(.5-t/180),i=Math.PI*(.5+e/180),o=new d.Spherical(s,n,i);return(new d.Vector3).setFromSpherical(o)}function k(e,t){const s=e.x-t.x,n=e.y-t.y;return Math.sqrt(s*s+n*n)}var P=s(1373);const A={FullyLoaded:"fully_loaded",DataSourceTick:"data_source_tick",Activity:"activity"},T=(0,P.Z)();var E={name:"FPSCounter",props:{updatePeriod:{type:Number,default:1}},data(){return{fps:0,objCount:0,activityIndicator:!1,lastUpdateTime:0}},methods:{pokeActivity(){this.activityIndicator=!0,setTimeout((()=>{this.activityIndicator=!1}),100)},update(e,t){e>0&&+Date.now()-1e3*this.updatePeriod>this.lastUpdateTime&&(this.fps=1/e,this.objCount=S(t),this.lastUpdateTime=+Date.now())}},unmounted(){T.off(A.Activity,this.pokeActivity)},mounted(){T.on(A.Activity,this.pokeActivity)}},C=s(89);const M=(0,C.Z)(E,[["render",b],["__scopeId","data-v-27eb1626"]]);var O=M,D=(s(8675),s(3462),s(4806)),N=s.n(D),z=s(9172),B=s.n(z);function I(e,t){return void 0===e?t:e}function R(e){return e.toString(16).padStart(2,"0")}class j{static getRandomInt(e){return Math.floor(Math.random()*e)}static getRandomFloat(e,t){return Math.random()*(t-e)+e}static getRandomSample(e){if(!e)return null;const t=j.getRandomInt(e.length);return e[t]}static removeRandomItem(e){if(Math.random()>.5){const t=j.getRandomInt(e.length);e.splice(t,1)}return e}static randomVector({xMin:e,xMax:t,yMin:s,yMax:n,zMin:i,zMax:o}){return e=I(+e,-10),t=I(+t,10),s=I(+s,-10),n=I(+n,10),i=I(+i,-10),o=I(+o,10),new d.Vector3(j.getRandomFloat(e,t),j.getRandomFloat(s,n),j.getRandomFloat(i,o))}static randomOnCircle(e=100,t=0,s=0){const n=j.getRandomFloat(0,2*Math.PI);return new d.Vector3(t+e*Math.cos(n),s+e*Math.sin(n))}static getRandomIntRange(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}static generateId(e){const t=new Uint8Array((e||20)/2);return window.crypto.getRandomValues(t),Array.from(t,R).join("")}}class F{constructor(e,t){this.p1=e,this.p2=t}get dx(){return this.p2.x-this.p1.x}get dy(){return this.p2.y-this.p1.y}whichSide(e,t){const s=e-this.p1.x,n=t-this.p1.y,i=this.dx,o=this.dy;return Math.sign(s*i-n*o)}get center(){return{x:.5*(this.p1.x+this.p2.x),y:.5*(this.p1.y+this.p2.y)}}nearestPoint(e,t){const s=e-this.p1.x,n=t-this.p1.y,i=this.dx,o=this.dy,a=s*i+n*o,r=i*i+o*o;let c=-1;return 0!==r&&(c=a/r),c<0?(e=this.p1.x,t=this.p1.y):c>1?(e=this.p2.x,t=this.p2.y):(e=this.p1.x+c*i,t=this.p1.y+c*o),{x:e,y:t}}pDistance(e,t){const s=this.nearestPoint(e,t);return new F(s,{x:e,y:t}).length}get length(){const e=this.dx,t=this.dy;return Math.sqrt(e*e+t*t)}}class V{static clamp(e,t,s){return Math.min(+s,Math.max(+t,+e))}static centerOf(e){if(!e||!e.length)return;let t=N().sumBy(e,(e=>e.x)),s=N().sumBy(e,(e=>e.y));return{x:t/e.length,y:s/e.length}}static _signHelper(e,t,s){return(e.x-s.x)*(t.y-s.y)-(t.x-s.x)*(e.y-s.y)}static pointInTriangle(e,t){const[s,n,i]=t,o=V._signHelper(e,s,n),a=V._signHelper(e,n,i),r=V._signHelper(e,i,s),c=o<0||a<0||r<0,l=o>0||a>0||r>0;return!(c&&l)}}function L(e,t=2,s=""){return B()(e).format({average:!0,mantissa:t})+s}const U="Rune";function H(e,t=2){return L(e,t," "+U)}var G=s(2378);class q{constructor(){this.mass=1,this.force=new d.Vector3,this.velocity=new d.Vector3,this.friction=0,this.attractors=[]}update(e){this.attractors.forEach?this.attractors.forEach((e=>e.applyForce(this))):this.attractors.applyForce&&this.attractors.applyForce(this);const t=this.force.multiplyScalar(this.mass);this.velocity.copy(this.velocity.clone().add(t.multiplyScalar(e))),this.velocity.multiplyScalar(V.clamp(1-this.friction,0,1)),this.velocity.lengthSq()>u.Physics.MaxSpeedSq&&this.velocity.setLength(Math.sqrt(u.Physics.MaxSpeedSq)),this.realObject.position.add(this.velocity.clone().multiplyScalar(e))}nullifyForce(){this.force.set(0,0,0)}get radius(){return 1}applyForceTo(e,t){this.force.add(e.copy().multiplyScalar(t))}get realObject(){return this}repel(e,t=100){if(e===this)return;const s=this.realObject.position,n=e.realObject.position,i=s.distanceTo(n),o=this.radius+e.radius;if(i<o){const i=s.clone().sub(n).normalize().multiplyScalar(t);this.force.add(i),e.force.add(i.negate())}}get boundingBox(){const e=this.realObject.position.x,t=this.realObject.position.y,s=this.radius;return{minX:e-s,minY:t-s,maxX:e+s,maxY:t+s}}shootOut(e=1){const t=this.o.position.clone().normalize().multiplyScalar(e);this.velocity.copy(t)}}var $="#ifdef USE_LOGDEPTHBUF\n#ifdef USE_LOGDEPTHBUF_EXT\nvarying float vFragDepth;\nvarying float vIsPerspective;\n#else\nuniform float logDepthBufFC;\n#endif\n#endif\n\n// optional: pass 2D rotation angle as an uniform\nuniform float rotation;\n// optional: pass 2D center point as an uniform\nuniform vec2 center;\n\nvarying vec2 vUv;\n\n// optional: use this define to scale the model according to distance from the camera\n#define USE_SIZEATTENUATION\n\n// [skipped includes]\n\nvoid main() {\n    vUv = uv;\n\n    // discard rotation and scale\n    vec4 mvPosition = modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0);\n\n    // extract model's scale\n    vec2 scale;\n    scale.x = length(vec3(modelMatrix[0].x, modelMatrix[0].y, modelMatrix[0].z));\n    scale.y = length(vec3(modelMatrix[1].x, modelMatrix[1].y, modelMatrix[1].z));\n\n    // if not defined, keep model the same size regardless of distance from the camera\n    #ifndef USE_SIZEATTENUATION\n    bool isPerspective = isPerspectiveMatrix(projectionMatrix);\n    if (isPerspective) scale *= - mvPosition.z;\n    #endif\n\n    // if center is not passed as uniform, create vec2 center = vec2(0.0);\n\n    // aligned with the camera [and scaled]\n    vec2 alignedPosition = (position.xy - center) * scale;\n\n    // if rotation is not passed as uniform, skip the next block\n\n    // rotate 2D\n    vec2 rotatedPosition;\n    rotatedPosition.x = cos(rotation) * alignedPosition.x - sin(rotation) * alignedPosition.y;\n    rotatedPosition.y = sin(rotation) * alignedPosition.x + cos(rotation) * alignedPosition.y;\n\n    // billboard\n    mvPosition.xy += rotatedPosition;\n\n    gl_Position = projectionMatrix * mvPosition;\n\n    // [skipped includes]\n    #ifdef USE_LOGDEPTHBUF\n        #ifdef USE_LOGDEPTHBUF_EXT\n    vFragDepth = 1.0 + gl_Position.w;\n//    vIsPerspective = float(isPerspectiveMatrix(projectionMatrix));\n    vIsPerspective = 1.0;\n        #else\n//    if (isPerspectiveMatrix(projectionMatrix)) {\n        gl_Position.z = log2(max(EPSILON, gl_Position.w + 1.0)) * logDepthBufFC - 1.0;\n        gl_Position.z *= gl_Position.w;\n//    }\n        #endif\n    #endif\n}",W="// port from http://glslsandbox.com/e#8625.0 by Duke\n// Fireball\n// Awd\n// @AlexWDunn\n\n#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\nuniform float logDepthBufFC;\nvarying float vFragDepth;\nvarying float vIsPerspective;\n#endif\n\nuniform float time;\nuniform float saturation;\n\nuniform float transitionShininess;\n\nuniform vec3 color;\n\nvarying vec2 vUv;\n\n#define saturate(oo) clamp(oo, 0.0, 1.0)\n\n// Quality Settings\n#define MarchSteps 5\n// Scene Settings\n#define ExpPosition vec3(0.0)\n#define Radius 1.0\n#define Background vec4(0.0, 0.0, 0.0, 0.0)\n// Noise Settings\n#define NoiseSteps 1\n#define NoiseAmplitude 0.06\n//#define NoiseFrequency 4.0\n#define NoiseFrequency 2.0\n#define Animation vec3(0.0, -3.0, 0.5)\n\n// Colour Gradient\n#define Color1 vec4(1.0, 1.0, 1.0, 1.0)\n#define Color2 vec4(0.2, 0.8, 1.0, 1.0)\n#define Color3 vec4(0.2, 0.03, 1.0, 1.0)\n#define Color4 vec4(0.05, 0.02, 0.02, 0.3)\n\nconst float zoom = 2.8f;// 2.5 full\n\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n//\nvec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 permute(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\n\nfloat snoise(vec3 v)\n{\n    const vec2 C = vec2(1.0 / 6.0, 1.0 / 3.0);\n    const vec4 D = vec4(0.0, 0.5, 1.0, 2.0);\n    // First corner\n    vec3 i = floor(v + dot(v, C.yyy));\n    vec3 x0 = v - i + dot(i, C.xxx);\n    // Other corners\n    vec3 g = step(x0.yzx, x0.xyz);\n    vec3 l = 1.0 - g;\n    vec3 i1 = min(g.xyz, l.zxy);\n    vec3 i2 = max(g.xyz, l.zxy);\n    vec3 x1 = x0 - i1 + C.xxx;\n    vec3 x2 = x0 - i2 + C.yyy;// 2.0*C.x = 1/3 = C.y\n    vec3 x3 = x0 - D.yyy;// -1.0+3.0*C.x = -0.5 = -D.y\n    // Permutations\n    i = mod289(i);\n    vec4 p = permute(permute(permute(i.z + vec4(0.0, i1.z, i2.z, 1.0)) + i.y + vec4(0.0, i1.y, i2.y, 1.0)) + i.x + vec4(0.0, i1.x, i2.x, 1.0));\n    // Gradients: 7x7 points over a square, mapped onto an octahedron.\n    // The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n    float n_ = 0.142857142857;// 1.0/7.0\n    vec3 ns = n_ * D.wyz - D.xzx;\n    vec4 j = p - 49.0 * floor(p * ns.z * ns.z);//  mod(p,7*7)\n    vec4 x_ = floor(j * ns.z);\n    vec4 y_ = floor(j - 7.0 * x_);// mod(j,N)\n    vec4 x = x_ * ns.x + ns.yyyy;\n    vec4 y = y_ * ns.x + ns.yyyy;\n    vec4 h = 1.0 - abs(x) - abs(y);\n    vec4 b0 = vec4(x.xy, y.xy);\n    vec4 b1 = vec4(x.zw, y.zw);\n    vec4 s0 = floor(b0) * 2.0 + 1.0;\n    vec4 s1 = floor(b1) * 2.0 + 1.0;\n    vec4 sh = -step(h, vec4(0.0));\n    vec4 a0 = b0.xzyw + s0.xzyw * sh.xxyy;\n    vec4 a1 = b1.xzyw + s1.xzyw * sh.zzww;\n    vec3 p0 = vec3(a0.xy, h.x);\n    vec3 p1 = vec3(a0.zw, h.y);\n    vec3 p2 = vec3(a1.xy, h.z);\n    vec3 p3 = vec3(a1.zw, h.w);\n    //Normalise gradients\n    vec4 norm = taylorInvSqrt(vec4(dot(p0, p0), dot(p1, p1), dot(p2, p2), dot(p3, p3)));\n    p0 *= norm.x;\n    p1 *= norm.y;\n    p2 *= norm.z;\n    p3 *= norm.w;\n    // Mix final noise value\n    vec4 m = max(0.6 - vec4(dot(x0, x0), dot(x1, x1), dot(x2, x2), dot(x3, x3)), 0.0);\n    m = m * m;\n    return 42.0 * dot(m * m, vec4(dot(p0, x0), dot(p1, x1), dot(p2, x2), dot(p3, x3)));\n}\n\n\n\nfloat Turbulence(vec3 position, float minFreq, float maxFreq, float qWidth)\n{\n    float value = 0.0;\n    float cutoff = clamp(0.5 / qWidth, 0.0, maxFreq);\n    float fade;\n    float fOut = minFreq;\n    for (int i = NoiseSteps; i >= 0; i--)\n    {\n        if (fOut >= 0.5 * cutoff) break;\n        fOut *= 2.0;\n        value += abs(snoise(position * fOut)) / fOut;\n    }\n    fade = clamp(2.0 * (cutoff - fOut) / cutoff, 0.0, 1.0);\n    value += fade * abs(snoise(position * fOut)) / fOut;\n    return 1.0 - value;\n}\n\nfloat SphereDist(vec3 position)\n{\n    return length(position - ExpPosition) - Radius;\n}\n\nvec4 Shade(float distance)\n{\n    float c1 = clamp(distance * 5.0 + 0.5, 0.0, 1.0);\n    float c2 = clamp(distance * 5.0, 0.0, 1.0);\n    float c3 = clamp(distance * 3.4 - 0.5, 0.0, 1.0);\n\n    //    #define Color1 vec4(1.0, 1.0, 1.0, 1.0)   -- white\n    //    #define Color2 vec4(0.2, 0.8, 1.0, 1.0) --- green\n    //    #define Color3 vec4(0.2, 0.03, 1.0, 1.0)  -- blue\n    //    #define Color4 vec4(0.05, 0.02, 0.02, 0.3) -- black transparent\n\n    vec4 original = vec4(color, 1.0);\n    vec4 a = mix(Color1, Color3, c1);\n    vec4 b = mix(a, Color4, c2);\n    return mix(original, b, c3);\n}\n\n// Draws the scene\nfloat RenderScene(vec3 position, out float distance)\n{\n    float noise = Turbulence(position * NoiseFrequency + Animation * time, 0.1, 1.5, 0.03) * NoiseAmplitude;\n    noise = clamp(abs(noise), 0.0, 1.0);\n    distance = SphereDist(position) - noise;\n    return noise;\n}\n\n// Basic ray marching method.\nvec4 March(vec3 rayOrigin, vec3 rayStep)\n{\n    vec3 position = rayOrigin;\n    float distance;\n    float displacement;\n    for (int step = MarchSteps; step >= 0; --step)\n    {\n        displacement = RenderScene(position, distance);\n        if (distance < 0.05) break;\n        position += rayStep * distance;\n    }\n    return mix(Shade(displacement), Background, float(distance >= 0.5));\n}\n\nbool IntersectSphere(vec3 ro, vec3 rd, vec3 pos, float radius, out vec3 intersectPoint)\n{\n    vec3 relDistance = (ro - pos);\n    float b = dot(relDistance, rd);\n    float c = dot(relDistance, relDistance) - radius * radius;\n    float d = b * b - c;\n    intersectPoint = ro + rd * (-b - sqrt(d));\n    return d >= 0.0;\n}\n\nconst float circleThickness = 0.15;\nconst float circleRadius = 0.78;\n\nvoid main()\n{\n    vec2 p = vUv * 2.0 - 1.0;\n\n    // camera\n    vec3 ro = zoom * vec3(.7, .7, 0.0);\n    vec3 ww = normalize(vec3(0.0, 0.0, 0.0) - ro);\n    vec3 uu = normalize(cross(vec3(0.0, 1.0, 0.0), ww));\n    vec3 vv = normalize(cross(ww, uu));\n    vec3 rd = normalize(p.x * uu + p.y * vv + 1.5 * ww);\n    //    vec3 rd = normalize(p.x*uu + p.y*vv + zoom_f * ww);\n    vec4 col = Background;\n    vec3 origin;\n    if (IntersectSphere(ro, rd, ExpPosition, Radius + NoiseAmplitude * 6.0, origin))\n    {\n        col = March(origin, rd);\n    }\n\n    float d = length(p);\n    if (saturation > 1.0) {\n        //  1.0 - smoothstep(radius-borderThickness, radius, d);\n        float t = 1.0 - smoothstep(0.0, circleRadius, abs(circleThickness - d));\n        col = mix(col * saturation, vec4(0.9, 0.9, 1.0, 0.5), clamp(t, 0.0, 0.5));\n    }\n\n    if(transitionShininess > 0.0) {\n        vec4 shineColor = vec4(0.8, 0.9, 1.0, 1.0);\n        col += shineColor * transitionShininess * clamp(1.0 - d * 0.9, 0.0, 1.0);\n    }\n\n    gl_FragColor = col;\n\n    #if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n    // Doing a strict comparison with == 1.0 can cause noise artifacts\n    // on some platforms. See issue #17623.\n    gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2(vFragDepth) * logDepthBufFC * 0.5;\n    #endif\n}\n",Y=s(7627),X=s(6550);function K(e,t){return(0,X.B$)(e,Object.assign({vertexMainOutro:"\n                    vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n                    vec3 scale = vec3(\n                      length(modelViewMatrix[0].xyz),\n                      length(modelViewMatrix[1].xyz),\n                      length(modelViewMatrix[2].xyz)\n                      );\n                    // size attenuation: scale *= -mvPosition.z * 0.2;\n                    mvPosition.xyz += position * scale;\n                    gl_Position = projectionMatrix * mvPosition;\n                    "},t))}const Z=Object.freeze({CREATE:"create",DESTROY:"destroy",SLASH:"slash",IP_ADDRESS:"ip_address",STATUS:"status",VERSION:"version",FORCED_LEAVE:"forced_to_leave",REQUESTED_LEAVE:"requested_to_leave",AWARD:"current_award",BOND_CHANGE:"bond",OBSERVE_CHAIN:"observe_chains",ACTIVE_BLOCK_HEIGHT:"active_block_height"});class Q{constructor(e,t,s,n,i){this.type=e,this.node=t,this.prevNode=s,this.currValue=n,this.prevValue=i,this.isTramp=!!t&&""===t.address}toString(){const e=this.node?this.node.address:"?";return`NodeEvent(${this.type}, ${e}, ${this.currValue} => ${this.prevValue})`}}Q.EVENT_TYPE=Z;const J=6,ee=Math.pow(10,8),te=1/ee;function se(e){return parseFloat(e)*te}class ne{constructor(e){if(e||(e={status:"Unknown",jail:{},bond_providers:{},preflight_status:{}}),this.address=e.node_address,this.status=e.status,this.bond=se(e.bond),this.activeBlockHeight=+e.active_block_height,this.bondAddress=e.bond_address,this.statusSince=+e.status_since,this.requestedToLeave=!!e.requested_to_leave,this.forcedToLeave=!!e.forced_to_leave,this.leaveHeight=+e.leave_height,this.IPAddress=e.ip_address,this.version=e.version,this.slashPoints=+e.slash_points,this.jail={address:e.jail.node_address,releaseHeight:+e.jail.release_height,reason:e.jail.reason},this.currentAward=se(e.current_award),this.observeChains={},e["observe_chains"])for(let{chain:t,height:s}of e["observe_chains"])this.observeChains[t]=+s;if(this.preflightStatus={status:e.preflight_status.status,reason:e.preflight_status.reason,code:+e.preflight_status.code},this.bondProviders={address:e.bond_providers["node_address"],fee:+e.bond_providers["node_operator_fee"]/1e4,providers:[]},e.bond_providers.providers)for(let{bond_address:t,bond:s}of e.bond_providers.providers)this.bondProviders.providers.push({bond_address:t,bond:se(s)});this.shortAddress=this.address?this.address.substring(this.address.length-4):"?",this.IPInfo={flag:"🏳️"}}get isActive(){return this.status===ie.Active}get isStandby(){return this.status===ie.Standby||this.status===ie.Ready}}const ie={Standby:"Standby",Ready:"Ready",Whitelisted:"Whitelisted",Disabled:"Disabled",Active:"Active",Unknown:"Unknown"};var oe=s(39),ae=s.n(oe);const re=u.Scene.NodeObject,ce=re.PlaneScale,le=new d.BoxGeometry(ce,ce,ce),de=new d.SphereGeometry(.5*re.PlaneScale,10,10),he=16724736,ue=42.42,pe=1/Math.sqrt(.72);class me extends q{constructor(e){super(),this.node=e,this.normalizedBond=this.node.bond/1e6,this.mass=this.normalizedBond+1,this.o=new d.Group,this.o.name=this.name,this.attractors=[],this.mass=1+2*this.normalizedBond,this.friction=u.Physics.BaseFriction,this._makeSphere(),this._makeLabel(),this._elevated=!1}get name(){return this.node.address}set elevated(e){e=Boolean(e),this._elevated!==e&&(this._elevated=e,this.material.uniforms.saturation.value=this._elevated?1.5:1,this.material.uniformsNeedUpdate=!0)}get elevated(){return this._elevated}_getSphereColor(){let e=1118481;const t=this.node.status;return t===ie.Standby?e=1473110:t===ie.Ready?e=1473167:t===ie.Active?e=j.getRandomSample([p.LightningBlue,p.YggdrasilGreen]):t===ie.Disabled?e=15597568:t===ie.Whitelisted?e=4473924:t===ie.Unknown&&(e=1118532),new d.Color(e)}_makeSphere(){this.mesh||(u.Scene.NodeObject.Simple?this._makeSimpleSphere():this._makeCoolSphere()),this.material.uniforms&&(this.material.uniforms.color.value=this._getSphereColor(),this.material.uniformsNeedUpdate=!0),this.mesh.name=this.name,this.mesh.renderOrder=1;const e=this.calculateScale;this.mesh.scale.setScalar(e),this.mesh.position.z=(0,Y.Qy)(-.1,.1),this.o.renderOrder=1,this.o.add(this.mesh)}_makeSimpleSphere(){this.material=new d.MeshBasicMaterial({color:this._getSphereColor()}),this.mesh=new d.Mesh(de,this.material)}_makeCoolSphere(){return this.material||this._makeMaterial(),this.mesh=new d.Mesh(le,this.material),this.mesh}_makeMaterial(){this.material=new d.ShaderMaterial({uniforms:{time:{value:j.getRandomFloat(0,100)},saturation:{value:1},color:{value:this._getSphereColor()},transitionShininess:{value:0}},vertexShader:$,fragmentShader:W,transparent:!0,depthTest:!0,depthWrite:!0})}get calculateScale(){const e=this.normalizedBond*re.MaxScale;return V.clamp(e,re.MinScale,re.MaxScale)}get realObject(){return this.o}get position(){return this.o.position}_makeLabel(){const e=this.node.address;if(e&&e.length>=4){const t=this.nameTextObj=new G.xv;t.text=e.slice(-4),t.font=u.Font.Main,t.fontWeight=900,t.fontSize=15,t.position.z=ue,t.color=this.node.status===ie.Active?16777215:12303291,t.anchorX="center",t.anchorY="middle",t.outlineWidth=2,t.sync(),t.renderOrder=100,t.name=this.name,t.material=K(new d.MeshBasicMaterial),t.scale.setScalar((0,D.clamp)(1.1*this.normalizedBond,.5,1.5)),this.o.add(t),this.labelObj=t}}dispose(){this.nameTextObj&&this.nameTextObj.dispose(),this.material.dispose()}get radius(){return Math.max(re.MinRadius,this.mesh.scale.x*re.PlaneScale*re.RadiusFactor)}static estimateRadiusOfGroup(e){let t=0;for(const n of e)t+=n.radius*n.radius;const s=Math.sqrt(t);return Math.max(.1,pe*s)}update(e){super.update(e),this.material&&(this.material.uniforms.time.value+=e)}updateFromCamera(e){const t=e.position.clone().sub(this.position);t.normalize().multiplyScalar(ue),this.nameTextObj.position.copy(t)}react(e){this.node=e.node,e.type===Q.EVENT_TYPE.OBSERVE_CHAIN?this.reactChain():e.type===Q.EVENT_TYPE.SLASH?this.reactSlash():e.type===Q.EVENT_TYPE.STATUS?this.reactStatusChange(e.node.status):e.type===Q.EVENT_TYPE.VERSION&&this.reactVersion()}reactChain(){const e=1,t=this.o.position.clone().normalize(),s=t.cross(new d.Vector3(0,0,1)).multiplyScalar(e);this.velocity.add(s)}reactVersion(){this._animateTransitionShininess()}reactSlash(){const e=100;this.shootOut(e);const t=this.material.uniforms.color.value.clone();this.material&&(this.material.uniforms.color.value.set(he),this.material.uniformsNeedUpdate=!0,setTimeout((()=>{this.material.uniforms.color.value.set(t),this.material.uniformsNeedUpdate=!0}),100))}reactStatusChange(e){console.log(`New status ${this.node.status} -> ${e}`),this._animateTransitionShininess()}_animateTransitionShininess(){const e=500,t=2.5*e,s=ae().Easing.Sinusoidal.InOut;new(ae().Tween)(this.material.uniforms.transitionShininess).to({value:1},e).easing(s).start().onComplete((()=>{this._makeSphere()})).chain(new(ae().Tween)(this.material.uniforms.transitionShininess).to({value:0},t).easing(s));const n=this.calculateScale,i=1.5*n;new(ae().Tween)(this.mesh.scale).to(new d.Vector3(i,i,i),e).easing(s).start().chain(new(ae().Tween)(this.mesh.scale).to(new d.Vector3(n,n,n),t).easing(s))}}var ve=s(5325),fe=s.n(ve);class ge{constructor(){this._objects={},this.repelForce=0,this.rBush=new(fe()),this.repelEnabled=!0}getByName(e){return this._objects[e]}addObject(e,t){const s=this.getByName(e);if(s)return console.warn("PhysObj already exists. No nothing"),s;this._objects[e]=t}removeObject(e){const t=this.getByName(e);t?(t.dispose(),delete this._objects[e]):console.error("PhysObj not found!")}_repelForceCalculation(e){let t=this.rBush.search(e.boundingBox);for(const s of t)s.o!==e&&e.repel(s.o,this.repelForce)}_updateObject(e,t){e.nullifyForce(),this.repelEnabled&&this._repelForceCalculation(e),e.update(t)}update(e){isNaN(e)||(this.rBush=new(fe()),this.rBush.load(N().map(N().values(this._objects),(e=>({...e.boundingBox,o:e})))),N().forEach(N().values(this._objects),(t=>this._updateObject(t,e))))}doNSteps(e,t=.016){for(let s=0;s<e;++s)this.update(t)}get physicalObjects(){return N().values(this._objects)}get objectPositions(){return N().map(this.physicalObjects,"position")}get allNames(){return N().keys(this._objects)}dispose(){this._objects={},this.rBush.clear()}get size(){return N().size(this._objects)}get entries(){return N().entries(this._objects)}}class ye extends d.Object3D{constructor(e,t=20,s=-45,n=!1){super(),this.text=e;const i=this.label=new G.xv;i.font=u.Font.Main,i.fontSize=10,i.scale.set(t,t,t),i.color=16777215,i.fillOpacity=1,i.anchorX="center",i.anchorY="middle",i.textAlign="center",i.text=e,n&&(i.material=K(new d.MeshBasicMaterial({transparent:!0}))),i.rotateX(d.MathUtils.degToRad(s)),i.sync(),this.t=i,this.add(i),this.animDuration=500,this.animDistance=1500,this.easeType=ae().Easing.Back.Out}animateIn(){this.t.position.z=this.animDistance,this.t.material.opacity=0,new(ae().Tween)(this.t.position).to({z:0},this.animDuration).easing(this.easeType).start(),new(ae().Tween)(this.t.material).to({opacity:1},this.animDuration).easing(this.easeType).start()}animateOut(e=!1){const t=5*this.animDuration;new(ae().Tween)(this.t.position).to({z:5*-this.animDistance},t).easing(this.easeType).start(),new(ae().Tween)(this.t.material).to({opacity:0},.5*t).easing(this.easeType).start().onComplete((()=>{e&&this.parent&&this.parent.remove(this)}))}}class _e{constructor(e){this.scene=e,this.active=!1,this.isFlat=!0,this._labelsHash={}}handleObject(e){}reactEvent(e,t){}makeLabel({text:e,position:t,scale:s=20,rotation:n=-45,bb:i=!1,key:o=null,moveIfExists:a=!0}){if(!e||""===e)return;if(o=o||j.generateId(),a){const e=this.findLabelByKey(o);if(e)return new(ae().Tween)(e.position).to(t,1e3).easing(ae().Easing.Sinusoidal.InOut).start(),e}const r=new ye(e,s,n,i);return r.key=o,r.position.copy(t),this.scene.add(r),this._labelsHash[o]=r,r}onEnter(){}_triggerOnEnter(e,t){this.onEnter(e,t),this.active=!0,N().values(this._labelsHash).forEach((e=>e.animateIn()))}onLeave(){}_triggerOnLeave(e,t){this.onLeave(e,t),this.active=!1,this.clearLabels()}findLabelByKey(e){return this._labelsHash[e]}killLabelByKey(e){const t=this.findLabelByKey(e);e&&(t.animateOut(!0),delete this._labelsHash[e])}clearLabels(){N().values(this._labelsHash).forEach((e=>e.animateOut(!0))),this._labelsHash={}}update(e){}}class be{constructor(e,t=0,s=0,n=0,i=-1,o=0){this.position=e,this.constCoeff=t,this.linearCoeff=s,this.quadraticCoeff=n,this.radius=i,this.relaxRadius=o}applyForceToDistance(e,t,s){const n=e.realObject.position,i=this.getForce(t,n,s);e.force.add(i)}getForce(e,t,s){const n=this.constCoeff+e*this.linearCoeff+e*e*this.quadraticCoeff;return s.clone().sub(t).normalize().multiplyScalar(n)}distance(e){const t=e.realObject.position;return this.position.distanceTo(t)}applyForce(e){const t=this.distance(e),s=this.radius<=0;(s||t<=this.radius)&&t>this.relaxRadius&&this.applyForceToDistance(e,t,this.position)}}be.INFINITE=-1;class Se extends be{distance(e){return k(this.position,e.realObject.position)}applyForce(e){super.applyForce(e),this.squishZ(e)}squishZ(e){const t=e.realObject.position.z-this.position.z;let s=0;Math.abs(t)>1&&(s=100*-t),e.force.z=s}}class we extends Se{constructor(e,t=0,s=0,n=0,i=0){const o=V.centerOf(N().flatten(e));super(new d.Vector3(o.x,o.y,0),t,s,n,0,0),this.triangles=e,this.center=o,this.z=i}get allSectors(){const e=[];for(const t of this.triangles)e.push(new F(t[0],t[1])),e.push(new F(t[1],t[2])),e.push(new F(t[2],t[0]));return e}applyForce(e){if(!this.triangles||!this.triangles.length)return;const t=e.realObject.position,s={x:t.x,y:t.y},n=N().some(this.triangles,(e=>V.pointInTriangle(s,e)));if(this.squishZ(e),n)return;const i=N().minBy(this.allSectors,(e=>e.pDistance(s.x,s.y))),o=i.nearestPoint(s.x,s.y),a=new F(o,s).length;this.applyForceToDistance(e,a,new d.Vector3(o.x,o.y,this.z))}}class xe{static original(){return[[{x:0,y:0},{x:133,y:-133},{x:-238,y:-291}],[{x:0,y:0},{x:-133,y:135},{x:291,y:311}]]}static triangles(e=0,t=0,s=1){const n=[];for(const i of this.original()){const o=[];for(const{x:n,y:a}of i)o.push({x:n*s+e,y:a*s+t});n.push(o)}return n}}class ke extends _e{constructor(e){super(e),this._circleRadius=350;const t=u.Physics.BaseForce;this.tcAttractor=new we(xe.triangles(0,100,1.8),t)}handleObject(e){e.attractors=this.tcAttractor}onEnter(e){const t=this.makeLabel({text:"THORChain",position:new d.Vector3(0,-580,-10),scale:18});t.t.opacity=.8,super.onEnter(),e.forEach((e=>{e.velocity.add(new d.Vector3(0,j.getRandomFloat(100,1e3),0))}))}}const Pe="*";class Ae extends _e{constructor(e){super(e),this._circleRadius=350,this._sideDistance=600;const t=u.Physics.BaseForce;this.tcAttractor=new we(xe.triangles(0,100,1.6),t),this._standbyAttractors=[new be(new d.Vector3(-this._sideDistance,0,0),t,0,0,0,.3*this._circleRadius),new be(new d.Vector3(-this._sideDistance,0,0),.02*t)],this.attractors={[ie.Active]:[this.tcAttractor],[ie.Standby]:this._standbyAttractors,[ie.Ready]:this._standbyAttractors,[Pe]:[new be(new d.Vector3(this._sideDistance,0,0),t,0,0,0,.3*this._circleRadius),new be(new d.Vector3(this._sideDistance,0,0),.02*t)]}}handleObject(e){e.attractors=null;const t=this.attractors[e.node.status];e.attractors=t||this.attractors[Pe]}onEnter(e){const t=N().countBy(e,"node.status"),s=(t[ie.Standby]||0)+(t[ie.Ready]||0),n=t[ie.Active]||0,i=e.length-(s+n);this.makeLabel({text:"Active",position:new d.Vector3(0,-500,0),scale:20}),this.makeLabel({text:"Standby",position:new d.Vector3(-this._sideDistance,-420,0),scale:12}),this.makeLabel({text:"Other",position:new d.Vector3(this._sideDistance,-420,0),scale:12}),this.makeLabel({text:n,position:new d.Vector3(0,-650,0),scale:10}),this.makeLabel({text:s,position:new d.Vector3(-this._sideDistance,-500,0),scale:6}),this.makeLabel({text:i,position:new d.Vector3(this._sideDistance,-500,0),scale:6}),super.onEnter()}}class Te extends q{constructor(e,t,s,n,i,o){super(),this.name=n,this.position=new d.Vector3(e,t,0),this._radius=s,this.attractors=i,this.friction=o}get radius(){return this._radius}}const Ee=u.Physics.BaseFriction;class Ce{constructor(e,t,s=600,n=Ee,i=1){this.force=e,this.boundRadius=t,this.iterSteps=i,this.dt=.05,this.simulation=new ge,this.simulation.repelForce=s,this.friction=n,this.metaAttractor=new be(new d.Vector3,this.force,0,0,-1,0)}addCircle(e,t){this.simulation.addObject(e,new Te(0,0,t,e,this.metaAttractor,this.friction))}arrangeAroundCenter(){if(!this.simulation.size)return this;const e=2*Math.PI/this.simulation.size,t=.5*this.boundRadius*.8;let s=.5*Math.PI;for(const n of this.simulation.allNames){const i=this.simulation.getByName(n);i&&(i.position.x=t*Math.cos(s),i.position.y=t*Math.sin(s)),s-=e}return this}clear(){this.simulation.dispose()}pack(e,t){return this.simulation.size?(e=e||this.dt,t=t||this.iterSteps,this.simulation.doNSteps(t,e),this):this}getResults(){const e={};for(const[t,{position:s,radius:n}]of this.simulation.entries)e[t]={position:s,radius:n};return e}}var Me=s(6265),Oe=s.n(Me),De=s(3461),Ne=s.n(De);class ze{constructor(e){this.ipAddress=e["ip"],this.countryCode=e["country_code"],this.country=e["country_name"],this.city=e["city"],this.latitude=e["latitude"],this.longitude=e["longitude"],this.providerName=e["org"],this.flag=ze.getFlagEmoji(this.countryCode)}static getFlagEmoji(e){if(e){const t=e.toUpperCase().split("").map((e=>127397+e.charCodeAt()));return String.fromCodePoint(...t)}return""}}const Be="UNKNOWN";class Ie{constructor(e=1440){this.expireMinutes=e,this._key="IPInfo2"}url(e){return`https://settings.thornode.org/api/node/ip/${e}`}async loadFromService(e){const t=await Oe().get(this.url(e.join(",")));return console.info(`Loaded IP info for (${e}) => ${t.status}`),N().mapValues(t.data,(e=>new ze(e)))}loadFromCache(e){return Ne().get(`${this._key}:${e}`)}saveToCache(e){if(!e||!e.ipAddress)return void console.warn("no data to save!");const t=e.ipAddress;Ne().set(`${this._key}:${t}`,e,this.expireMinutes)}async loadBunch(e){const t={},s=[];N().each(e,(e=>{const n=this.loadFromCache(e);n?t[e]=n:s.push(e)})),console.log(`requestList = ${s.length}, cached = ${N().keys(t).length}`);const n=N().chunk(s,50);for(const i of n){const e=await this.loadFromService(i);N().each(N().values(e),(e=>this.saveToCache(e))),N().extend(t,e)}return t}static refineProviderName(e){if(void 0===e)return Be;e=e.toUpperCase(),e=e.replace("ONLINE GMBH","");for(const t of e.split("-"))if("AS"!==t)return t;return e}}class Re extends _e{constructor(e){super(e),this._attractorBanish=new be(new d.Vector3(0,0,0),-100),this.attractors={},this.force=u.Physics.BaseForce,this.circlePacker=new Ce(this.force,1400,300,.02,1)}update(){this._transferAttractorsPositionFromPacker()}handleObject(e){if(e){let t=Ie.refineProviderName(e?.node?.IPInfo?.providerName??Be);e.attractors=this.attractors[t]??this._attractorBanish}}onEnter(e){this._createProviderAttractors(e),super.onEnter()}_createProviderAttractors(e){const t={};let s=null,n=0;for(const o of e){const e=o?.node?.IPInfo?.providerName??Be,i=Ie.refineProviderName(e);if(t[i]){const e=t[i];e.push(o),e.length>n&&(s=i,n=e.length)}else t[i]=[o]}this.circlePacker.clear(),this.attractors={};const i=N().sortBy(N().entries(t),[e=>e[1].length]);for(const[o,a]of i)o!==s&&this._makeAttractor(o,a,!0);this.circlePacker.arrangeAroundCenter(),this._transferAttractorsPositionFromPacker(),s&&this._makeAttractor(s,t[s],!1);for(const o of e)o.velocity.z=j.getRandomFloat(-1e3,1e3);this._makeLabels(t,s)}_makeAttractor(e,t,s){const n=1.05*me.estimateRadiusOfGroup(t);return s&&this.circlePacker.addCircle(e,n),this.attractors[e]=new be(new d.Vector3,this.force,0,0,0,n),n}_makeLabelForGroup(e,t,s){const n=e[t].length,i=`${t} (${n})`;this.makeLabel({text:i,position:new d.Vector3(s.x,s.y-180,60),scale:5})}_makeLabels(e,t){const s=this.circlePacker.getResults();for(const[n,{position:i}]of N().entries(s))this._makeLabelForGroup(e,n,i);t&&this._makeLabelForGroup(e,t,new d.Vector3)}_transferAttractorsPositionFromPacker(){const e=this.circlePacker.getResults();for(const[t,{position:s}]of N().entries(e)){const e=this.attractors[t];e?e.position.copy(s):console.warn(`no attr for ${t}`)}}}function je(e){return void 0===e||null===e||isNaN(e)}class Fe{constructor(e,t,s){this.x=e,this.y=t,this.z=s}static fromString(e){if(e instanceof Fe)return e;const t=N().map(e.split("."),(e=>parseInt(e))),s=t.length,n=t[0],i=s>1?t[1]:0,o=s>2?t[2]:0;return new Fe(n,i,o)}get isInvalid(){return je(this.x)||je(this.y)||je(this.z)}greater(e){return this.x>e.x||this.y>e.y||this.z>e.z}less(e){return this.x<e.x||this.y<e.y||this.z<e.z}equal(e){return this.x===e.x&&this.y===e.y&&this.z===e.z}toString(){return`${this.x}.${this.y}.${this.z}`}inc(e=10,t=10){return this.z++,this.z>=e&&(this.z=0,this.y++,this.y>=t&&(this.x++,this.y=0)),this}get asInt(){return this.z+1e3*this.y+1e6*this.x}static loadVersions(e){return N().map(e,(e=>Fe.fromString(e)))}static maximumVersion(e){return N().maxBy(Fe.loadVersions(e),(e=>e.asInt))}static minimumVersion(e){return N().minBy(Fe.loadVersions(e),(e=>e.asInt))}static getVersionSet(e,t="node.version"){return Fe.loadVersions(N().uniq(N().map(e,t)))}static getSemanticVersionsDistribution(e,t="node.version",s="node.isActive"){const n=N().filter(e,(e=>N().get(e,s))),i=Fe.getVersionSet(n,t),o=Fe.maximumVersion(i),a=Fe.minimumVersion(i),r=N().differenceBy(i,N().compact([o,a]),(e=>e.asInt)),c=N().map(r,(e=>e.toString())),l={};for(const d of e){const e=N().get(d,t),s=Fe.fromString(e);let n=null,i="";s.equal(o)?(n=o.toString(),i="latest"):s.equal(a)?(n=a.toString(),i="active"):N().includes(c,e)?(n=e,i="interim"):e&&"0.0.0"!==e?(n=`${s.x}.X.X`,i="old"):n="unknown",l[n]||(l[n]={objects:[],comment:i,mostPopular:!1,isActive:d.node.isActive}),l[n].objects.push(d)}if(!N().isEmpty(l)){const e=N().maxBy(N().values(l),(e=>e.objects.length));e.mostPopular=!0}return l}}class Ve extends _e{constructor(e){super(e),this._circleRadius=350,this._sideDistance=600,this.force=u.Physics.BaseForce,this._attractorsByKey={},this._attractorsByVersion={},this._attractorBanish=new be(new d.Vector3(0,0,0),-100),this._previousKeys=[],this._versionDist={}}reactEvent(e,t){e.type===Q.EVENT_TYPE.VERSION&&(console.log(`New version detected: ${e.currValue}`),this._packAttractorPositions(t),this._makeLabels())}handleObject(e){if(e){let t=e.node.version;e.attractors=this._attractorsByVersion[t]??this._attractorBanish}}onEnter(e){this._packAttractorPositions(e),this._makeLabels(),this.makeLabel({text:"Versions",position:new d.Vector3(0,-630,-10),scale:14})}_packAttractorPositions(e){this._versionDist=Fe.getSemanticVersionsDistribution(e);const t=100,s=1.2;let n=0,i=0;for(const r of N().values(this._versionDist))r.radius=s*me.estimateRadiusOfGroup(r.objects),++n,i+=2*r.radius;i+=Math.max(0,n-1)*t;let o=.5*-i;this._attractorsByVersion={},this._attractorsByKey={};let a=N().entries(this._versionDist);a=N().sortBy(a,(e=>e[0]));for(const[r,c]of a){const e=c.radius,s=new be(new d.Vector3(o+e,0,0),this.force,0,0,0,c.radius);o+=t+2*e,this._attractorsByKey[r]=s;for(const t of c.objects)this._attractorsByVersion[t.node.version]=s}}_makeLabels(){const e=[];for(const[s,n]of N().entries(this._versionDist)){e.push(s);const t=this._attractorsByKey[s];if(t){let e,i,o="\n"+n.comment;"latest"===n.comment?e="#41e9ff":"active"===n.comment?e="#19ff52":"interim"===n.comment&&(e="#1cc245",o=""),i="unknown"===s?"Unknown":`v. ${s} (${n.objects.length})${o}`;const a=new d.Vector3(t.position.x,t.position.y-1.1*t.relaxRadius-30,50),r=this.makeLabel({text:i,position:a,scale:2.5,key:s}).t;n.isActive||(r.fillOpacity=.7),e&&(r.color=e)}}const t=N().difference(this._previousKeys,e);N().forEach(t,(e=>{this.killLabelByKey(e)})),t.length&&console.log(`Removing ${t.length} version labels...`),this._previousKeys=e}}class Le extends _e{constructor(e){super(e),this.nameToAttractor={},this.force=u.Physics.BaseForce,this.center=new d.Vector3(0,120),this._noBondAttractor=new be(this.center,this.force)}handleObject(e){e.attractors=this.nameToAttractor[e.node.address]}onEnter(e){const t=this.makeLabel({text:"Bonds",position:new d.Vector3(0,-630,-10),scale:14});t.t.opacity=.8,e=N().sortBy(e,"node.bond");const s=e.length;this.nameToAttractor={},0!==s&&(this._positionateOnSpiral(e),super.onEnter())}_positionateOnSpiral(e){const t=e.length;let s=0,n=34;const i=1.5;let o=5.9,a=.5;const r=.995,c=.991;for(let l=0;l<t;++l){const t=this.center.x+i*n*Math.cos(s),d=this.center.y+n*Math.sin(s);this._addAttractor(e[l],t,d)&&(n+=o,s+=a,o*=r,a*=c)}}_positionateOnGrid(e){const t=e.length,s=Math.ceil(Math.sqrt(t)),n=Math.ceil(t/s),i=100,o=s*i,a=n*i,r=.5*o,c=.5*a;for(let l=0;l<t;++l){const t=l%s,n=Math.floor(l/s),o=i*t-r,a=i*n-c;this._addAttractor(e[l],o,a)}}_addAttractor(e,t,s){const n=e.node.bond;if(n>1){const i=0;return this.nameToAttractor[e.node.address]=new be(new d.Vector3(t,s,i),this.force,0,0,-1,10),this.makeLabel({text:H(n),position:new d.Vector3(t,s-e.radius-10,-10),scale:1}),!0}return this.nameToAttractor[e.node.address]=this._noBondAttractor,!1}}var Ue="//uniform float time;\n//uniform float saturation;\n//uniform vec3 color;\n\nvarying vec2 vUv;\nvarying vec3 vNormal;\n\nconst vec3 ATMO_COLOR = vec3(0.3, 0.6, 1.0);\nconst vec3 FORWARD = vec3(0.0, 0.0, 1.0);\n\nuniform sampler2D globeTexture;\n\nvoid main(void) {\n    float intensity = 1.05 - dot(vNormal, FORWARD);\n    vec3 atmo = clamp(ATMO_COLOR * pow(intensity, 1.5), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));\n//    vec3 atmo = vec3(0.0, 0.0, 0.0);\n    gl_FragColor = vec4(atmo + texture2D(globeTexture, vUv).xyz, 1.0);\n    //    gl_FragColor = texture2D(globeTexture, vUv);\n}\n\n",He="varying vec2 vUv;\nvarying vec3 vNormal;\n\nvoid main()\n{\n    vUv = uv;\n    vNormal = normalMatrix * normalize(normal);\n    vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n    gl_Position = projectionMatrix * mvPosition;\n}";class Ge extends _e{constructor(e){super(e),this.isFlat=!1,this.force=1.2*u.Physics.BaseForce,this._banishAttractor=new be(new d.Vector3(0,0,0),this.force),this._nameToAttractor={},this._coordToAttractor={}}handleObject(e){const t=this._nameToAttractor[e.name];e.attractors=t?[t]:[this._banishAttractor]}onEnter(e,t){super.onEnter(),t.repelEnabled=!1,this._createAttractorsStacked(e),u.Scene.Globe.Enabled&&(this._makeGlobe(),this._putInGlobe())}onLeave(e,t){this._destroyGlobe(),N().forEach(e,(e=>e.shootOut(2e3))),super.onLeave(),t.repelEnabled=!0}_makeGlobe(){if(this.globeMesh)return;const e=new d.TextureLoader,t=u.Scene.Globe,s=new d.SphereGeometry(t.Radius,t.Details,t.Details),n=new d.ShaderMaterial({name:"AtmosphereShaderMaterial",fragmentShader:Ue,vertexShader:He,uniforms:{globeTexture:{value:e.load(u.Scene.Globe.TextureMap)}}});if(this.globeMesh=new d.Mesh(s,n),this.globeMesh.renderOrder=9999,this.scene.add(this.globeMesh),t.Clouds.Opacity>0){const n=new d.MeshPhongMaterial({map:e.load(t.Clouds.Texture),side:d.DoubleSide,opacity:t.Clouds.Opacity,transparent:!0,depthWrite:!1,blending:d.AdditiveBlending});this.cloudMesh=new d.Mesh(s,n),this.cloudMesh.scale.setScalar(t.Clouds.ElevationScale),this.globeMesh.add(this.cloudMesh),this.cloudMesh2=new d.Mesh(s,n),this.cloudMesh2.scale.setScalar(t.Clouds.ElevationScale),this.globeMesh.add(this.cloudMesh2)}}_putInGlobe(){this.globeMesh.scale.set(.01,.01,.01),new(ae().Tween)(this.globeMesh.scale).to(new d.Vector3(1,1,1)).easing(ae().Easing.Sinusoidal.InOut).start()}_destroyGlobe(){if(!this.globeMesh)return;const e=this.globeMesh;new(ae().Tween)(e.scale).to(new d.Vector3(.01,.01,.01)).easing(ae().Easing.Sinusoidal.InOut).onComplete((()=>{e.parent.remove(e)})).start(),this.globeMesh=null}update(e){super.update(e),this.cloudMesh&&(this.cloudMesh.rotation.y+=.02*e),this.cloudMesh2&&(this.cloudMesh2.rotation.y-=.04*e)}_createAttractors(e){const t=u.Scene.Globe.Radius+u.Scene.Globe.NodeElevation;this._nameToAttractor={},this._coordToAttractor={};for(const s of e){const e=s.node.IPInfo;if(e&&s.node.IPAddress){const n=`${e.longitude}, ${e.latitude}`;let i=this._coordToAttractor[n];if(!i){const s=x(e.longitude,e.latitude,t);i=this._coordToAttractor[n]=new be(s,this.force,0,0,be.INFINITE,5)}this._nameToAttractor[s.node.address]=i}else this._nameToAttractor[s.node.address]=this._banishAttractor}console.log(`Total attractors were made: ${this._coordToAttractor.length}.`)}_createAttractorsStacked(e){this._nameToAttractor={},this._coordToStack={};for(const s of e){const e=s.node.IPInfo;if(e&&s.node.IPAddress){const t=`${e.longitude}, ${e.latitude}`;let n=this._coordToStack[t];n||(this._coordToStack[t]=n={stack:[],longitude:e.longitude,latitude:e.latitude}),n.stack.push(s)}else this._nameToAttractor[s.node.address]=this._banishAttractor}const t=u.Scene.Globe.Radius+u.Scene.Globe.NodeElevation;for(const{stack:s,longitude:n,latitude:i}of N().values(this._coordToStack)){const e=N().sortBy(s,(e=>-e.node.bond));let o=t;for(const t of e){const e=x(n,i,o);this._nameToAttractor[t.node.address]=new be(e,this.force,0,0,be.INFINITE,5),o+=2.1*t.radius}}console.log(`Total attractors were made: ${this._coordToAttractor.length}.`)}}const qe=Object.freeze({Normal:"normal",Status:"status",Provider:"provider",Version:"version",Bond:"bond",Geo:"geo"});class $e extends ge{constructor(e){super(),this.holder=new d.Group,e.add(this.holder),this._currentIdent=0,this.parent=e,this._modeNormal=new ke(this.parent),this._modeStatus=new Ae(this.parent),this._modeProvider=new Re(this.parent),this._modeVersion=new Ve(this.parent),this._modeBond=new Le(this.parent),this._modeGeo=new Ge(this.parent),this._selector={[qe.Normal]:this._modeNormal,[qe.Status]:this._modeStatus,[qe.Provider]:this._modeProvider,[qe.Version]:this._modeVersion,[qe.Bond]:this._modeBond,[qe.Geo]:this._modeGeo},this._selectedModeHandler=this._modeNormal,this.mode=qe.Normal,this.repelForce=u.Physics.RepelForce}genIdent(e){return e.address??String(this._currentIdent++)}_placeNodeObject(e){const t=j.randomOnCircle(2e3);e.o.position.copy(t),this.holder.add(e.o)}createNewNode(e){const t=this.genIdent(e),s=this.getByName(t);if(s)return console.warn("NodeObject already exists. No nothing"),s;console.info(`Create node ${t}.`);const n=new me(e);return this._placeNodeObject(n),this.addObject(t,n),n}destroyNode(e){const t=e.address??e,s=this.getByName(t);s?(console.info(`Destroy node ${t}.`),s.dispose(),this.holder.remove(s.o),super.removeObject(t)):console.error("node not found!")}set mode(e){this._mode!==e&&(this._mode=e,this._selectedModeHandler._triggerOnLeave(this.physicalObjects,this),this._selectedModeHandler=this._selector[this._mode],this._selectedModeHandler._triggerOnEnter(this.physicalObjects,this),console.log(`Set Mode: ${e}`))}_updateObject(e,t){e&&(this._selectedModeHandler.handleObject(e),super._updateObject(e,t))}reactEvent(e){const t=j.getRandomFloat(0,u.DataSource.ReactRandomDelay);setTimeout((()=>{const t=this.getByName(e.node.address);t&&(t.react(e),this._selectedModeHandler.reactEvent(e,this.physicalObjects))}),t)}update(e){this._selectedModeHandler.update(e),super.update(e)}updateFromCamera(e){N().each(this.physicalObjects,(t=>t.updateFromCamera(e)))}dispose(){super.dispose(),w(this.holder);for(const e of this.physicalObjects)e.dispose()}setElevatedNode(e){for(const t of this.physicalObjects)t.elevated=t.name===e}get isCurrentModeFlat(){return this._selectedModeHandler.isFlat}}class We{constructor(e,t){this.prev=e,this.curr=t}extractEvents(){const e=[],t=(t,s,n,i)=>{i=i||"address",e.push(new Q(t,s,n,s?s[i]:"",n?n[i]:""))},s=N().difference(this.curr.nameSet,this.prev.nameSet);for(const r of s){const e=this.curr.byAddress[r];t(Q.EVENT_TYPE.CREATE,e,e)}const n=N().difference(this.prev.nameSet,this.curr.nameSet);for(const r of n){const e=this.prev.byAddress[r];t(Q.EVENT_TYPE.DESTROY,e,e)}const i=Q.EVENT_TYPE,o={slashPoints:i.SLASH,bond:i.BOND_CHANGE,IPAddress:i.IP_ADDRESS,status:i.STATUS,height:i.ACTIVE_BLOCK_HEIGHT,currentAward:i.AWARD,observeChains:i.OBSERVE_CHAIN,version:i.VERSION},a=N().intersection(this.curr.nameSet,this.prev.nameSet);for(const r of a){const e=this.prev.byAddress[r],s=this.curr.byAddress[r],n=N().union(N().keys(e),N().keys(s)),i=N().filter(n,(t=>!N().isEqual(e[t],s[t])));for(const a of i){const n=o[a];n&&t(n,s,e,a)}}return e}}class Ye{constructor(e=10){this.tick=1,this.period=e,this.enabled=!0,this.juggleStatus=!0,this.juggleVersion=!0,this.memorizeVersions={}}handleNodes(e){return this.enabled&&(this.tick%this.period===0&&(e=this._juggleNodes(e)),this.tick++),e}_juggleNodes(e){return this.juggleStatus&&(e=this._juggleNodesStatus(e)),this.juggleVersion&&(e=this._juggleNodesVersion(e)),e}_juggleNodesStatus(e){const t=j.getRandomIntRange(2,7),s=j.getRandomIntRange(2,7);return console.warn(`Attention! _juggleNodes: IN: ${t}, OUT: ${s}!`),e.filteredByStatus(ie.Active).sampleRandomly(s).setStatusAll(ie.Standby),e.filteredByStatus(ie.Standby).sampleRandomly(t).setStatusAll(ie.Active),e}_nextVersion(e){return Fe.fromString(e).inc(10,100).toString()}_juggleNodesVersion(e){const t=1,s=this;return N().each(e.nodes,(e=>{const t=s.memorizeVersions[e.address];t&&(e.version=t)})),e.sampleRandomly(t).nodes.forEach((e=>{const t=e.version;e.version=this._nextVersion(e.version),s.memorizeVersions[e.address]=e.version,console.warn(`Debug upgrade ${e.shortAddress}: ${t} => ${e.version}`)})),e}}class Xe{constructor(e,t=!0){this.nodes=e||[],this.total=this.nodes.length,t&&(this._nodesWithNames=N().filter(this.nodes,(e=>e.address)),this.byAddress=N().keyBy(this._nodesWithNames,"address"),this.nameSet=N().keys(this.byAddress),this.totalBond=N().sumBy(this.nodes,(e=>e.bond)),this.maxSlashNode=N().maxBy(this.nodes,(e=>e.slashPoints)),this.trampCount=this.total-this._nodesWithNames.length,this.maxAgeNode=N().maxBy(N().filter(this.nodes,(e=>e.activeBlockHeight&&e.activeBlockHeight>0)),(e=>e.activeBlockHeight)),this.ranks={bond:this._makeRanking("bond","desc"),slash:this._makeRanking("slashPoints"),age:this._makeRanking("activeBlockHeight"),award:this._makeRanking("currentAward")},this.topHeights=this.calculateTopBlockHeight(3),this.topVersion=this.calculateTopVersion())}_makeRanking(e,t="asc"){const s=N().orderBy(this._nodesWithNames,[e],[t]),n=N().map(s,"address"),i=Array.from(Array(s.length),((e,t)=>t+1));return Object.fromEntries(N().zip(n,i))}findByAddress(e){return this.byAddress[e]}sortedNodes(e,t=!0){const s=t?1:-1;return new Xe(N().sortBy(this.nodes,(t=>s*t[e])))}filteredByStatus(e){return new Xe(N().filter(this.nodes,(t=>t.status===e)))}get sortedByBond(){return this.sortedNodes("bond")}get sortedByAge(){return this.sortedNodes("statusSince")}get ipAddresses(){return N().compact(N().uniq(N().map(this.nodes,(e=>e.IPAddress))))}sampleRandomly(e){return new Xe(N().sampleSize(this.nodes,e))}setStatusAll(e){N().forEach(this.nodes,(t=>t.status=e))}bondPercentOfTotal(e){return(e/this.totalBond*100).toFixed(2)}get length(){return this.total}_calculateTopBlockOneChain(e,t){const s=N().map(Object.keys(t),(e=>parseInt(e)));s.sort().reverse();for(const n of s){const s=t[n];if(s>=e)return n}return null}calculateTopBlockHeight(e=2){const t=Array.from(new Set(N().flatten(N().map(this._nodesWithNames,(e=>N().keys(e.observeChains)))))),s=N().map(t,(e=>N().countBy(this._nodesWithNames,(t=>t.observeChains[e]??0))));return N().zipObject(t,N().map(t,((t,n)=>this._calculateTopBlockOneChain(e,s[n]))))}calculateTopVersion(){if(0===this.nodes.length)return null;let e=Fe.fromString(this.nodes[0].version);for(let t=1;t<this.nodes.length;++t){const s=Fe.fromString(this.nodes[t].version);s.greater(e)&&(e=s)}return e.toString()}estimateTimestampAtBlock(e,t){const s=e-t;return Date.now()-s*J*1e3}}class Ke{constructor(e,t){this.period=t,this.baseUrl=e,this._isRunning=!1,this._timer=0,this.callback=()=>0,this.ipAddressLoader=new Ie}run(){this._isRunning?console.warn(`${this.toString()} is already running`):(this._isRunning=!0,console.info(`${this.toString()} started!`),this._tick().then(),this._timer=setInterval((()=>{this._tick().then()}),this.period))}stop(){this._isRunning&&(clearInterval(this._timer),this._timer=0,this._isRunning=!1,console.info(`${this.toString()} stopped.`))}toString(){return`URLDataSource(${this.baseUrl}, ${this.period} sec)`}get isRunning(){return this._isRunning}async dataProcess(e){return e}get url(){return this.baseUrl}async _tick(){try{const e=await Oe().get(this.url,{headers:{"Content-type":"application/json"}});if(this.callback){const t=await this.dataProcess(e.data);this.callback(t)}}catch(e){throw console.error(`${this.toString()} tick failed: ${e}`),e}}}class Ze extends Ke{get url(){return this.baseUrl+"/thorchain/nodes"}async dataProcess(e){const t=new Xe(N().map(e,(e=>new ne(e))));let s={};try{s=await this.ipAddressLoader.loadBunch(t.ipAddresses)}catch(n){console.error("failed to load IPInfo")}for(const i of t.nodes)i.IPAddress&&(i.IPInfo=s[i.IPAddress]);return t}}class Qe extends Ke{get url(){return this.baseUrl+"/thorchain/lastblock"}async dataProcess(e){const t={};for(const s of e)t["THOR"]=+s["thorchain"],t[s["chain"]]=+s["last_observed_in"];return t}}const Je={lastBlock:{THOR:0},lastNodes:[]};class et{constructor(e,t){this.scene=e,this.camera=t,this.prevNodes=new Xe([],!1),this.nodes=new Xe([],!1),this.nodeGroup=new $e(this.scene),this._firstTime=!0,this._runDataSource(),this._fullyLoaded=!1,this._nodeJuggler=new Ye(3),this._nodeJuggler.enabled=u.DataSource.NodeJuggler.Enabled}_runDataSource(){const e=u.DataSource.NodesURL;this.nodeDataSource=new Ze(e,u.DataSource.Nodes.PollPeriod),this.nodeDataSource.callback=this.handleData.bind(this),this.nodeDataSource.run(),this.lastBlockSource=new Qe(e,u.DataSource.LastBlock.PollPeriod),this.lastBlockSource.callback=e=>{Je.lastBlock=e},this.lastBlockSource.run()}handleData(e){if(!e)return void console.error("No nodes to handle!");this._fullyLoaded||(this._fullyLoaded=!0,T.emit(A.FullyLoaded)),e=this._nodeJuggler.handleNodes(e),Je.lastNodes=e,T.emit(A.DataSourceTick,e),this.prevNodes=this.nodes,this.nodes=e;const t=new We(this.prevNodes,this.nodes),s=t.extractEvents();console.info(`Handle Data tick! Total: ${s.length} events.`);for(const n of s){const e=n.node;e.address&&(n.type===Q.EVENT_TYPE.CREATE?this.nodeGroup.createNewNode(e):n.type===Q.EVENT_TYPE.DESTROY?this.nodeGroup.destroyNode(e):this.nodeGroup.reactEvent(n))}if(this._firstTime){for(let e=0;e<u.Physics.Startup.SimulationSteps;++e)this.nodeGroup.update(u.Physics.Startup.DeltaTime);this._firstTime=!1}s.length&&T.emit(A.Activity)}update(e){this.nodeGroup.update(e),this.nodeGroup.updateFromCamera(this.camera)}dispose(){this.nodeDataSource.stop(),this.lastBlockSource.stop(),this.nodeGroup.dispose(),w(this.scene)}findNodeByAddress(e){return this.nodes.byAddress[e]}pick(e){const t=this.findNodeByAddress(e);console.log(t)}}var tt='/*\n * Copyright 2014 Roman Bobniev (FatumR)\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvarying vec2 vUv;\nuniform float time;\n\n#define OCTAVES  8.0\n\n\nfloat rand(vec2 co){\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nfloat rand2(vec2 co){\n    return fract(cos(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\n// Rough Value noise implementation\nfloat valueNoiseSimple(vec2 vl) {\n    float minStep = 1.0;\n\n    vec2 grid = floor(vl);\n    vec2 gridPnt1 = grid;\n    vec2 gridPnt2 = vec2(grid.x, grid.y + minStep);\n    vec2 gridPnt3 = vec2(grid.x + minStep, grid.y);\n    vec2 gridPnt4 = vec2(gridPnt3.x, gridPnt2.y);\n\n    float s = rand2(grid);\n    float t = rand2(gridPnt3);\n    float u = rand2(gridPnt2);\n    float v = rand2(gridPnt4);\n\n    float x1 = smoothstep(0., 1., fract(vl.x));\n    float interpX1 = mix(s, t, x1);\n    float interpX2 = mix(u, v, x1);\n\n    float y = smoothstep(0., 1., fract(vl.y));\n    float interpY = mix(interpX1, interpX2, y);\n\n    return interpY;\n}\n\n\nfloat fractalNoise(vec2 vl) {\n    float persistance = 2.0;\n    float amplitude = 0.5;\n    float rez = 0.0;\n    vec2 p = vl;\n\n    for (float i = 0.0; i < OCTAVES; i++) {\n        rez += amplitude * valueNoiseSimple(p);\n        amplitude /= persistance;\n        p *= persistance;\n    }\n    return rez;\n}\n\nfloat complexFBM(vec2 p) {\n    float slow = time / 2.5;\n    float fast = time / .5;\n    vec2 offset1 = vec2(slow, 0.);// Main front\n    vec2 offset2 = vec2(sin(fast)* 0.1, 0.);// sub fronts\n\n    return\n    fractalNoise(p + offset1 + fractalNoise(\n    p + fractalNoise(\n    p + 2. * fractalNoise(p - offset2)\n    )\n    )\n    );\n}\n\nconst vec3 blueColor = vec3(0.029411765, 0.207843137, 0.250392157);\nconst vec3 blackColor2 = vec3(0.00803922, 0.0203921569, 0.015686275);\n\nvoid main() {\n    vec2 uv = vUv;\n    uv = uv * vec2(2.0, 0.5) - 1.0;\n\n    vec3 rez = mix(blackColor2, blueColor, complexFBM(uv));\n    gl_FragColor = vec4(rez, 1.0);\n}';const st=new d.PlaneBufferGeometry(2,2,1,1),nt="\t\nuniform vec4 uSize; \t\t//w h t l \nvarying vec2 vUv;\n\nvoid main(){\n\tvUv = uv;\n\tvec2 transformed = \n\t    position.xy * uSize.xy \n\t    - vec2(1.,-1.) + vec2( uSize.x ,  -uSize.y ) \n\t    + vec2( uSize.w , - uSize.z ) * 2.;\n\tgl_Position = vec4( transformed , 1. , 1. );\n}\n",it="\nvarying vec2 vUv;\nuniform sampler2D uTexture;\n// uniform float time;\n\nvoid main(){\n\tgl_FragColor = texture2D( uTexture , vUv );\n}\t\n";class ot extends d.Mesh{constructor({width:e=1,height:t=1,top:s=0,left:n=0,texture:i=null,fragmentShader:o=!1}={}){super(st,new d.ShaderMaterial({uniforms:{uTexture:{type:"t",value:i},uSize:{type:"v4",value:new d.Vector4(1,1,0,0)},time:{value:0}},vertexShader:nt,fragmentShader:o||it,depthWrite:!1})),this.frustumCulled=!1,this.renderOrder=-1,this.top=s,this.left=n,this.width=e,this.height=t,this._pixels=[!1,!1,!1,!1],this._componentSetters=[this.setWidth,this.setHeight,this.setTop,this.setLeft],this._components=["width","height","top","left"],this.screenSize=new d.Vector2(1,1),this.setSize(e,t),this.setOffset(s,n)}update(e){this.material.uniforms.time.value+=e}setScreenSize(e,t){this.screenSize.set(e,t),this._pixels.forEach(((e,t)=>{e&&this._componentSetters[t].call(this,this[this._components[t]])}))}setSize(e,t){this.setWidth(e),this.setHeight(t)}setWidth(e){this.width=e,isNaN(e)?(this.material.uniforms.uSize.value.x=parseInt(e)/this.screenSize.x,this._pixels[0]=!0):(this.material.uniforms.uSize.value.x=e,this._pixels[0]=!1)}setHeight(e){this.height=e,isNaN(e)?(this.material.uniforms.uSize.value.y=parseInt(e)/this.screenSize.y,this._pixels[1]=!0):(this.material.uniforms.uSize.value.y=e,this._pixels[1]=!1)}setOffset(e,t){this.setLeft(t),this.setTop(e)}setTop(e){this.top=e,isNaN(e)?(this.material.uniforms.uSize.value.z=parseInt(e)/this.screenSize.y,this._pixels[2]=!0):(this.material.uniforms.uSize.value.z=e,this._pixels[2]=!1)}setLeft(e){this.left=e,isNaN(e)?(this.material.uniforms.uSize.value.w=parseInt(e)/this.screenSize.x,this._pixels[3]=!0):(this.material.uniforms.uSize.value.w=e,this._pixels[3]=!1)}}class at{constructor(e){this.scene=e}install(){}update(e){}setSize(e,t){}}class rt extends at{constructor(e){super(e),this.quad=new ot({fragmentShader:tt})}install(){this.scene.add(this.quad)}update(e){this.quad.update(e)}setSize(e,t){this.quad&&this.quad.setScreenSize(e,t)}}const ct={class:"control-panel"},lt=["onClick"];function dt(e,t,s,n,o,a){return(0,i.wg)(),(0,i.iD)("div",ct,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.modes,(e=>((0,i.wg)(),(0,i.iD)("button",{onClick:t=>a.setSceneMode(e.value),class:(0,g.C_)(a.isButtonSelectedClass(e.value)),key:e.value},(0,g.zw)(e.text),11,lt)))),128))])}var ht={name:"ControlPanel",components:{},emits:["mode-selected"],props:{},data(){return{selectedMode:qe.Normal,activeOnly:!1}},computed:{modes(){return[{value:qe.Normal,text:"NORMAL"},{value:qe.Status,text:"STATUS"},{value:qe.Provider,text:"PROVIDER"},{value:qe.Version,text:"VERSION"},{value:qe.Bond,text:"BOND"},{value:qe.Geo,text:"GEO"}]}},methods:{isButtonSelectedClass(e){return{"button-selected":this.selectedMode===e}},setSceneMode(e){this.selectedMode=e,this.$emit("mode-selected",e)}},mounted(){u.Scene.InitialMode&&u.Scene.InitialMode!==qe.Normal&&setTimeout((()=>this.setSceneMode(u.Scene.InitialMode)),1e3)}};const ut=(0,C.Z)(ht,[["render",dt],["__scopeId","data-v-3168b94a"]]);var pt=ut;const mt=(0,i._)("h1",null,"Node details",-1),vt={class:"prop-grid"},ft={class:"prop-box"},gt=(0,i._)("div",{class:"category"},"Status",-1),yt={class:"prop-box"},_t=(0,i._)("div",{class:"category"},"Since",-1),bt={class:"value"},St={key:0,content:"The oldest active node"},wt=(0,i.Uk)("⌛"),xt=[wt],kt={class:"prop-box"},Pt=(0,i._)("div",{class:"category"},"💽 Version",-1),At={class:"value"},Tt={key:0,content:"Latest version"},Et=(0,i.Uk)("👌"),Ct=[Et],Mt={key:1,content:"Consider upgrading your node!"},Ot=(0,i.Uk)("⚠️"),Dt=[Ot],Nt={key:0,class:"prop-box"},zt=(0,i._)("div",{class:"category"},"🕸️ IP address",-1),Bt={class:"value"},It=["href"],Rt={key:1,class:"prop-box"},jt=(0,i._)("div",{class:"category"},"📍 Location",-1),Ft={class:"value"},Vt={key:2,class:"prop-box"},Lt=(0,i._)("div",{class:"category"},"☁️ Provider",-1),Ut={class:"value"},Ht={key:3,class:"prop-box"},Gt=(0,i._)("div",{class:"value"},"Unknown IP address",-1),qt=[Gt],$t={class:"prop-box"},Wt=(0,i._)("div",{class:"category"},"🌐 Explorer",-1),Yt={class:"value"},Xt=["href"],Kt={class:"prop-box"},Zt=(0,i._)("div",{class:"category"},"🔒 Bond",-1),Qt={class:"value"},Jt={class:"prop-box"},es=(0,i._)("div",{class:"category"},"🏆 Awards",-1),ts={class:"value"},ss={class:"prop-box"},ns=(0,i._)("div",{class:"category"},"😈 Slash points",-1),is={class:"value"},os={class:"category"},as={class:"value"},rs=["title"],cs={key:1};function ls(e,t,s,o,a,r){const c=(0,i.up)("font-awesome-icon"),l=(0,i.Q2)("tippy");return(0,i.wg)(),(0,i.j4)(n.uT,{name:"shrink"},{default:(0,i.w5)((()=>[(0,i._)("div",{class:"window",onKeyup:t[2]||(t[2]=(0,n.D2)((0,n.iM)(((...e)=>r.close&&r.close(...e)),["prevent"]),["esc"])),tabindex:"0",ref:"modal"},[(0,i.wy)((0,i._)("div",{class:"close-button",onClick:t[0]||(t[0]=(...e)=>r.close&&r.close(...e)),content:"Close it"},null,512),[[l]]),mt,(0,i._)("h2",null,[s.node.requestedToLeave?(0,i.wy)(((0,i.wg)(),(0,i.j4)(c,{key:0,class:"icon",icon:"fa-solid fa-arrow-right",content:"Requested to leave!"},null,512)),[[l]]):(0,i.kq)("",!0),s.node.forcedToLeave?(0,i.wy)(((0,i.wg)(),(0,i.j4)(c,{key:1,class:"icon",icon:"fa-solid fa-arrow-down-up-lock",content:"Forced to leave!"},null,512)),[[l]]):(0,i.kq)("",!0),(0,i.Uk)(" "+(0,g.zw)(s.node.address)+" ",1),(0,i.wy)(((0,i.wg)(),(0,i.iD)("button",{class:"copy-button",onClick:t[1]||(t[1]=(...e)=>r.copyNodeAddress&&r.copyNodeAddress(...e)),content:"Copy address"},[(0,i.Wm)(c,{icon:"fa-solid fa-copy"})])),[[l]])]),(0,i._)("div",vt,[(0,i._)("div",ft,[gt,(0,i.Uk)(" "+(0,g.zw)(r.statusEmoji)+" ",1),(0,i._)("span",{class:(0,g.C_)(r.nodeStatusClass)},(0,g.zw)(s.node.status),3)]),(0,i._)("div",yt,[_t,(0,i._)("div",bt,[r.isOldest?(0,i.wy)(((0,i.wg)(),(0,i.iD)("span",St,xt)),[[l]]):(0,i.kq)("",!0),(0,i.Uk)(" "+(0,g.zw)(r.statusSince)+" ",1),(0,i._)("small",null,"(#"+(0,g.zw)(r.ageRank)+")",1)])]),(0,i._)("div",kt,[Pt,(0,i._)("div",At,[r.isUpToDataVersion?(0,i.wy)(((0,i.wg)(),(0,i.iD)("span",Tt,Ct)),[[l]]):(0,i.wy)(((0,i.wg)(),(0,i.iD)("span",Mt,Dt)),[[l]]),(0,i.Uk)(" "+(0,g.zw)(s.node.version),1)])]),r.hasIP?((0,i.wg)(),(0,i.iD)("div",Nt,[zt,(0,i._)("div",Bt,[(0,i._)("a",{href:r.ipAddressInfoLink,target:"_blank"},(0,g.zw)(s.node.IPAddress),9,It)])])):(0,i.kq)("",!0),r.hasIP?((0,i.wg)(),(0,i.iD)("div",Rt,[jt,(0,i._)("div",Ft,(0,g.zw)(s.node.IPInfo?.flag)+" "+(0,g.zw)(s.node.IPInfo?.country)+", "+(0,g.zw)(s.node.IPInfo?.city||"unknown city"),1)])):(0,i.kq)("",!0),r.hasIP?((0,i.wg)(),(0,i.iD)("div",Vt,[Lt,(0,i._)("div",Ut,(0,g.zw)(r.providerName),1)])):((0,i.wg)(),(0,i.iD)("div",Ht,qt)),(0,i._)("div",$t,[Wt,(0,i._)("div",Yt,[(0,i._)("a",{href:`https://viewblock.io/thorchain/address/${s.node.address}`,target:"_blank"},"Viewblock – "+(0,g.zw)(s.node.shortAddress),9,Xt)])]),(0,i._)("div",Kt,[Zt,(0,i._)("div",Qt,[(0,i.Uk)((0,g.zw)(r.nodeBond)+" ",1),(0,i._)("small",null,"(#"+(0,g.zw)(r.nodeBondRank)+")",1)])]),(0,i._)("div",Jt,[es,(0,i._)("div",ts,(0,g.zw)(r.award),1)]),(0,i._)("div",ss,[ns,(0,i._)("div",is,[(0,i.Uk)((0,g.zw)(s.node.slashPoints)+" pts. ",1),(0,i._)("small",null,"(#"+(0,g.zw)(r.slashPointsRank)+")",1)])]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Object.entries(s.node.observeChains),(([e,t])=>((0,i.wg)(),(0,i.iD)("div",{class:"prop-box",key:e},[(0,i._)("div",os,(0,g.zw)(e),1),(0,i._)("div",as,[r.chainLag(e)?((0,i.wg)(),(0,i.iD)("span",{key:0,title:t,class:"chain-lag"}," 🩸 "+(0,g.zw)(r.chainLag(e))+" blocks behind! ",9,rs)):((0,i.wg)(),(0,i.iD)("span",cs," Up to date "))])])))),128))])],544)])),_:1})}var ds=s(1945),hs=s.n(ds);const us={[ie.Active]:{emoji:"✅",class:"status-active"},[ie.Standby]:{emoji:"⏳",class:"status-standby"},[ie.Disabled]:{emoji:"🔴",class:"status-disabled"},[ie.Whitelisted]:{emoji:"📄",class:"status-whitelisted"}};var ps={name:"NodeDetailsWindow",emits:["close"],props:["node","nodeSet"],data(){return{}},computed:{topThorHeight(){return Je.lastBlock.THOR},hasIP(){return this.node.IPAddress&&""!==this.node.IPAddress},statusEmoji(){return us[this.node.status]?.emoji},nodeStatusClass(){return us[this.node.status]?.class},statusSince(){const e=this.nodeSet.estimateTimestampAtBlock(this.topThorHeight,this.node.statusSince);try{return new Date(e).toISOString().slice(0,10)}catch{return"N/A"}},isOldest(){return!0},ageRank(){return this.nodeSet.ranks.age[this.node.address]},award(){return H(Math.round(this.node.currentAward))},nodeBond(){return H(Math.round(this.node.bond))},nodeBondRank(){return this.nodeSet.ranks.bond[this.node.address]},nodeBondPercent(){return this.nodeSet.bondPercentOfTotal(this.node.bond)},ipAddressInfoLink(){return`https://www.infobyip.com/ip-${this.node.IPAddress}.html`},slashPointsRank(){return this.nodeSet.ranks.slash[this.node.address]},chainLag(){return e=>(this.nodeSet.topHeights[e]??0)-(this.node.observeChains[e]??0)},providerName(){const e=this.node?.IPInfo?.providerName??Be;return Ie.refineProviderName(e)},isUpToDataVersion(){return this.node.version===this.nodeSet.topVersion}},methods:{copyNodeAddress(){hs()(this.node.address)},close(){this.$emit("close")}},mounted(){this.$refs.modal.focus()}};const ms=(0,C.Z)(ps,[["render",ls]]);var vs=ms,fs=s(8657);class gs{constructor(e,t=new d.Vector3){this.domElement=e,this.center=t,this._createCamera(),this._createCameraControl(),this._animating=!1,this.controlsEnabled=!0}reset(){this.controls.reset()}_createCamera(){this.camera=new d.PerspectiveCamera(45,window.innerWidth/window.innerHeight,.001,2*u.Controls.Camera.Distance.Max),this.camera.position.z=u.Controls.Camera.Distance.Start}_createCameraControl(){const e=this.controls=new fs.Z(this.camera,this.domElement),t=u.Controls.Camera;e.dragToOffset=!0,e.minDistance=t.Distance.Min,e.maxDistance=t.Distance.Max,this.camera.position.z=t.Distance.Start,e.minAzimuthAngle=d.MathUtils.degToRad(-t.AzimuthAngleLimit),e.maxAzimuthAngle=d.MathUtils.degToRad(t.AzimuthAngleLimit),e.minPolarAngle=d.MathUtils.degToRad(90-t.PolarAngleLimit),e.maxPolarAngle=d.MathUtils.degToRad(t.PolarAngleLimit+90),e.update(0)}update(e){!this.controlsEnabled||this._animating||this.cameraInspectsObject||this.controls.update(e)}onResize(){const e=this.domElement,t=e.clientWidth,s=e.clientHeight;this.camera.aspect=t/s,this.camera.updateProjectionMatrix()}_getEndQuaternion(e,t){const s=this.camera.position.clone(),n=this.camera.quaternion.clone();this.camera.position.copy(e),this.camera.lookAt(t);const i=this.camera.quaternion.clone();return this.camera.position.copy(s),this.camera.quaternion.copy(n),i}cameraLookAtNode(e,t){this.cameraInspectsObject||(this.oldCameraPos=this.camera.position.clone(),this.oldCameraQuaternion=this.camera.quaternion.clone(),this.cameraInspectsObject=!0),this._animating=!0;const s=u.Controls.Camera.Animation,n=this;let i,o;if(t)i=e.o.position.clone().add(new d.Vector3(0,0,s.DistanceWhenZoomed)),o=e.o.position.clone();else{const t=e.o.position.clone().normalize().multiplyScalar(s.DistanceWhenZoomed);i=e.o.position.clone().add(t),o=e.o.position.clone()}new(ae().Tween)(this.camera.position).to(i,s.Duration).easing(ae().Easing.Sinusoidal.InOut).onComplete((()=>{n._animating=!1})).start();const a=this._getEndQuaternion(i,o);new(ae().Tween)(this.camera.quaternion).to(a,s.Duration).easing(ae().Easing.Sinusoidal.InOut).start()}restoreCamera(){if(this.cameraInspectsObject){this.cameraInspectsObject=!1,this._animating=!0;const e=this,t=u.Controls.Camera.Animation.Duration;new(ae().Tween)(this.camera.position).to(this.oldCameraPos,u.Controls.Camera.Animation.Duration).easing(ae().Easing.Sinusoidal.InOut).onUpdate((function(){})).onComplete((()=>{e._animating=!1})).start();const s=this._getEndQuaternion(this.oldCameraPos,this.center);new(ae().Tween)(this.camera.quaternion).to(s,t).easing(ae().Easing.Sinusoidal.InOut).start()}}dispose(){this.controls.dispose()}}const ys={class:"loading-indicator"},_s=(0,i.Uk)("Loading.");function bs(e,t,s,n,o,a){return(0,i.wg)(),(0,i.iD)("div",ys,[_s,(0,i._)("span",null,(0,g.zw)(o.dots),1)])}var Ss={name:"LoadingIndicator",data(){return{dots:""}},methods:{tick(){this.dots+=".",this.dots.length>=3&&(this.dots="")}},mounted(){this.timer=setInterval(this.tick,200)},beforeUnmount(){clearInterval(this.timer)}};const ws=(0,C.Z)(Ss,[["render",bs],["__scopeId","data-v-3618bf7b"]]);var xs=ws,ks=s(4870),Ps={name:"MainScreen",components:{LoadingIndicator:xs,NodeDetailsWindow:vs,ControlPanel:pt,FPSCounter:O},props:{},data(){return{isLoading:!0,showFps:u.Debug.ShowFPS,mouseEnterX:0,mouseEnterY:0,tickCounter:0,sceneMode:"normal",fullyLoaded:!1,nodeDetailsVisible:!1,nodeToViewDetails:new ne,zoomedToNode:!1,nodeSet:(0,ks.XI)()}},methods:{onKeyDown(e){"KeyR"===e.code?this.cameraController.reset():"KeyF"===e.code?this.showFps=!this.showFps:"KeyH"===e.code&&console.log("help?")},onMouseMove(e){const t=e.clientX,s=e.clientY;if(!this.mouseEnterX)return this.mouseEnterX=t,void(this.mouseEnterY=s);const n=u.Controls.Camera.MouseMoveStrength,i=this.mouseEnterX-t,o=this.mouseEnterY-s;this.mouseEnterX=t,this.mouseEnterY=s,this.cameraController.controls.rotate(i*n,o*n);const a=this._pickObject(e)?.name;this.content.nodeGroup.setElevatedNode(a),this.zoomedToNode||(this.nodeDetailsVisible=!!a,this.nodeDetailsVisible&&(this.nodeToViewDetails=this.content.findNodeByAddress(a)))},onMouseEnter(e){this.mouseEnterX=e.clientX,this.mouseEnterY=e.clientY},onMouseLeave(){},_pickObject(e,t=!1){if(!this.raycaster)return null;const s=this.getCanvasRelativePosition(e);this.raycaster.setFromCamera(s,this.cameraController.camera);const n=this.raycaster.intersectObjects(this.content.nodeGroup.holder.children,!0);t&&console.log("Objects hit by the ray caster: "+n.length);const i=N().filter(N().map(n,"object"),(e=>e.name&&""!==e.name));return i.length?i[0]:null},onClick(e){console.log(e);const t=this._pickObject(e,!0);if(console.log(t),t){const e=t.name;e&&e.startsWith("thor")&&this._onPickNodeObject(e)}else this.nodeDetailsVisible=!1,this.cameraController.restoreCamera()},_onPickNodeObject(e){console.log("Picked node:",e),this.content.pick(e),this.nodeToViewDetails=this.content.findNodeByAddress(e),this.nodeDetailsVisible=!0;const t=this.content.nodeGroup.getByName(e);t&&(this.zoomedToNode=!0,this.cameraController.cameraLookAtNode(t,this.content.nodeGroup.isCurrentModeFlat))},getCanvasRelativePosition(e){const t=this.canvas.getBoundingClientRect(),s={x:e.clientX-t.left,y:e.clientY-t.top};return{x:s.x/this.canvas.clientWidth*2-1,y:-s.y/this.canvas.clientHeight*2+1}},resizeRendererToDisplaySize(){const e=this.renderer,t=e.domElement,s=t.clientWidth,n=t.clientHeight,i=this.composer._width!==s||this.composer._height!==n;return i&&(e.setSize(s,n,!1),this.bloomPass&&this.bloomPass.setSize(s,n),this.composer.setSize(s,n),this.bg&&this.bg.setSize(s,n),this.cameraController.onResize()),i},render(){let e=this.clock.getDelta();"hidden"!==document.visibilityState&&(e>.4&&(e=.01),this.resizeRendererToDisplaySize(this.renderer),ae().update(),this.$refs.fps.update(e,this.scene),this.cameraController.update(e),this.content.update(e),this.bg&&this.bg.update(e),this.composer.render(e),requestAnimationFrame(this.render))},makeSkybox(){u.Scene.Background.Enabled&&(this.bg=new rt(this.scene),this.bg.install())},makeRenderer(e){let t=this.renderer=new d.WebGLRenderer({canvas:e,antialias:!1,logarithmicDepthBuffer:u.Renderer.LogZBuffer});devicePixelRatio&&(console.log(`Renderer: Setting devicePixelRatio = ${devicePixelRatio}.`),t.setPixelRatio(devicePixelRatio));const s=new v.C(this.scene,this.cameraController.camera);this.composer=new m.xC(t),this.composer.addPass(s);const n=u.Effects.Bloom;n.Enabled&&(this.bloomPass=new f.m(new d.Vector2(window.innerWidth,window.innerHeight),n.Strength,n.Radius,n.Threshold),this.composer.addPass(this.bloomPass))},buildScene(){this.scene.add(this.cameraController.camera),this.makeSkybox(),this.content=new et(this.scene,this.cameraController.camera)},setSceneMode(e){this.sceneMode=e,this.content.nodeGroup&&(this.content.nodeGroup.mode=e)},onFullyLoaded(){console.log("fully loaded! removing loading screen..."),this.isLoading=!1,this.fullyLoaded=!0},onDataArrived(e){this.nodeSet=e},onCloseDetails(){this.zoomedToNode=!1,this.nodeDetailsVisible=!1,this.nodeToViewDetails=new ne,this.cameraController.restoreCamera()}},mounted(){this.canvas=this.$refs.canvas,this.clock=new d.Clock,this.scene=new d.Scene,this.cameraController=new gs(this.canvas),this.makeRenderer(this.canvas),this.resizeRendererToDisplaySize(),this.buildScene(),this.raycaster=new d.Raycaster,T.on(A.FullyLoaded,this.onFullyLoaded),T.on(A.DataSourceTick,this.onDataArrived),requestAnimationFrame(this.render)},unmounted(){this.content.dispose(),this.cameraController.dispose(),T.off(A.FullyLoaded),T.off(A.DataSourceTick)}};const As=(0,C.Z)(Ps,[["render",l]]);var Ts=As,Es={name:"App",components:{MainScreen:Ts},data(){return{}},computed:{},created(){document.title="THORViz",this.preloading()},methods:{preloading(){(0,G.C5)({font:u.Font.Main,characters:"abcdefghijklmnopqrstuvwxyz1234567890"},(()=>{console.log("font loading done")}))}}};const Cs=(0,C.Z)(Es,[["render",o]]);var Ms=Cs,Os=s(3494),Ds=s(7749),Ns=s(8539),zs=s(814),Bs=(s(6718),s(3016),s(761));(0,Bs.W8)()||alert("WebGL is not supported!"),fs.Z.install({THREE:d}),Os.vI.add(Ns.kZ_,Ns.eFW,Ns.NC7);const Is=(0,n.ri)(Ms);Is.component("font-awesome-icon",Ds.GN),Is.use(zs.BA,{directive:"tippy",component:"tippy",flipDuration:0,defaultProps:{placement:"top"},popperOptions:{modifiers:{preventOverflow:{enabled:!1}}}}),Is.config.globalProperties.emitter=T,Is.mount("#app")}},t={};function s(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(o.exports,o,o.exports,s),o.loaded=!0,o.exports}s.m=e,function(){var e=[];s.O=function(t,n,i,o){if(!n){var a=1/0;for(d=0;d<e.length;d++){n=e[d][0],i=e[d][1],o=e[d][2];for(var r=!0,c=0;c<n.length;c++)(!1&o||a>=o)&&Object.keys(s.O).every((function(e){return s.O[e](n[c])}))?n.splice(c--,1):(r=!1,o<a&&(a=o));if(r){e.splice(d--,1);var l=i();void 0!==l&&(t=l)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[n,i,o]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,n){var i,o,a=n[0],r=n[1],c=n[2],l=0;if(a.some((function(t){return 0!==e[t]}))){for(i in r)s.o(r,i)&&(s.m[i]=r[i]);if(c)var d=c(s)}for(t&&t(n);l<a.length;l++)o=a[l],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(d)},n=self["webpackChunkthorviz"]=self["webpackChunkthorviz"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=s.O(void 0,[998],(function(){return s(552)}));n=s.O(n)})();
//# sourceMappingURL=app.ee4c4744.js.map